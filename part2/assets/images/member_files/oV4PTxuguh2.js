if (self.CavalryLogger) { CavalryLogger.start_js(["MJ5rC"]); }

__d("VideoPlayerStreamSwitchReasons",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={BANDWIDTH:"bandwidth",FORCED:"forced",PREFER_HIGH_QUALITY:"prefer_high_quality",USER:"user"};},null);
__d("VideoQualityClassInternal",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={orderedValues:["sd","hd","uhd"]};},null);
__d('TaggedTimeRanges',['sprintf'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this.$TaggedTimeRanges1=[];this.$TaggedTimeRanges2=0;this.$TaggedTimeRanges3=0;this.$TaggedTimeRanges4=i?i:function(j,k){return j===k;};}h.prototype.add=function(i,j,k){'use strict';if(j<i)return;if(j===i)return;if(this.$TaggedTimeRanges1.length===0){this.$TaggedTimeRanges1.push({start:i,end:j,tag:k});return;}var l=0,m=0;for(var n=0;n<this.$TaggedTimeRanges1.length;n++){if(i>=this.$TaggedTimeRanges1[n].start)l=n+1;if(j<=this.$TaggedTimeRanges1[n].end)m=n;if(j<this.$TaggedTimeRanges1[n].start)break;}this.$TaggedTimeRanges1.splice(l,m-l,{start:i,end:j,tag:k});this.$TaggedTimeRanges5(l);};h.prototype.$TaggedTimeRanges5=function(i){'use strict';var j=this.$TaggedTimeRanges1[i],k=null;if(i!==0)k=this.$TaggedTimeRanges1[i-1];if(k!==null)if(this.$TaggedTimeRanges4(k.tag,j.tag)){if(k.end>=j.start){this.$TaggedTimeRanges1.splice(i-1,2,{start:k.start,end:Math.max(j.end,k.end),tag:j.tag});i--;}}else{if(k.end>=j.start)this.$TaggedTimeRanges1.splice(i-1,1,{start:k.start,end:j.start,tag:k.tag});if(k.end>j.end)this.$TaggedTimeRanges1.splice(i+1,0,{start:j.end,end:k.end,tag:k.tag});}var l=null;if(i!==this.$TaggedTimeRanges1.length-1)l=this.$TaggedTimeRanges1[i+1];if(l)if(this.$TaggedTimeRanges4(l.tag,j.tag)){if(l.start<=j.end)this.$TaggedTimeRanges1.splice(i,2,{start:j.start,end:Math.max(l.end,j.end),tag:j.tag});}else if(l.start<=j.end)if(l.end<j.end){this.$TaggedTimeRanges1.splice(i,1,{start:j.start,end:l.start,tag:j.tag});this.$TaggedTimeRanges1.push({start:l.end,end:j.end,tag:j.tag});}else this.$TaggedTimeRanges1.splice(i+1,1,{start:j.end,end:l.end,tag:l.tag});};h.prototype.get=function(i){'use strict';var j=i>=this.$TaggedTimeRanges3?this.$TaggedTimeRanges2:0,k=null;for(var l=j;l<this.$TaggedTimeRanges1.length;l++)if(this.$TaggedTimeRanges1[l].start<=i&&i<this.$TaggedTimeRanges1[l].end){k=l;break;}this.$TaggedTimeRanges2=k===null?0:k;this.$TaggedTimeRanges3=i;return k===null?null:this.$TaggedTimeRanges1[k].tag;};h.prototype.getLength=function(){'use strict';return this.$TaggedTimeRanges1.length;};f.exports=h;},null);
__d("Shaka",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h={};(function(i){var j,k=this;function l(dm,em){var fm=dm.split("."),gm=k;fm[0] in gm||!gm.execScript||gm.execScript("var "+fm[0]);for(var hm;fm.length&&(hm=fm.shift());)fm.length||void 0===em?gm[hm]?gm=gm[hm]:gm=gm[hm]={}:gm[hm]=em;}function m(dm,em){function fm(){}fm.prototype=em.prototype;dm.Rb=em.prototype;dm.prototype=new fm();dm.prototype.constructor=dm;dm.Qb=function(gm,hm,im){return em.prototype[hm].apply(gm,Array.prototype.slice.call(arguments,2));};}function n(){}function o(dm){var em=console[dm];em?em.bind||(console[dm]=function(){em.apply(console,arguments);}):console[dm]=function(){};}o("error");o("warn");o("info");o("log");o("debug");function p(dm){t[dm]={fa:s(),end:NaN};}function q(dm){if(dm=t[dm])dm.end=s();}function r(dm){return (dm=t[dm])&&dm.end?dm.end-dm.fa:NaN;}var s=i.performance&&i.performance.now?i.performance.now.bind(i.performance):Date.now,t={};function u(dm,em,fm,gm){this.id=dm;this.bandwidth=em||0;this.lang=fm||"unknown";this.streamInfoID=gm;this.active=false;}l("shaka.player.AudioTrack.compare",function(dm,em){return dm.lang<em.lang?-1:dm.lang>em.lang?1:dm.bandwidth<em.bandwidth?-1:dm.bandwidth>em.bandwidth?1:0;});function v(){this.minBandwidth=this.maxBandwidth=this.maxWidth=this.minHeight=this.maxHeight=null;}v.prototype.clone=function(){var dm=new v();dm.maxHeight=this.maxHeight;dm.minHeight=this.minHeight;dm.maxWidth=this.maxWidth;dm.maxBandwidth=this.maxBandwidth;dm.minBandwidth=this.minBandwidth;return dm;};function w(){this.fontSize="100%";this.fontColor=z;this.fontOpacity=ba;this.backgroundColor=aa;this.backgroundOpacity=ba;this.fontEdge=ca;}l("shaka.player.TextStyle",w);function x(dm){var em=[];em.push("font-size: "+dm.fontSize);em.push("color: "+y(dm.fontColor,dm.fontOpacity));em.push("background-color: "+y(dm.backgroundColor,dm.backgroundOpacity));for(var fm=[],gm=0;gm<dm.fontEdge.length;++gm){var hm=dm.fontEdge[gm].slice(3,6);fm.push(y(dm.fontEdge[gm].slice(0,3),dm.fontOpacity)+" "+hm.join("px ")+"px");}em.push("text-shadow: "+fm.join(","));return em.join("; ");}function y(dm,em){return "rgba("+dm.concat(em).join(",")+")";}var z=[255,255,255],aa=[0,0,0];w.StandardColors={WHITE:z,BLACK:aa,RED:[255,0,0],GREEN:[0,255,0],BLUE:[0,0,255],YELLOW:[255,255,0],MAGENTA:[255,0,255],CYAN:[0,255,255]};var ba=1;w.StandardOpacities={OPAQUE:ba,SEMI_HIGH:.75,SEMI_LOW:.25,TRANSPARENT:0};var ca=[];w.EdgeStyles={NONE:ca,RAISED:[[34,34,34,1,1,0],[34,34,34,2,2,0],[34,34,34,3,3,0]],DEPRESSED:[[204,204,204,1,1,0],[204,204,204,0,1,0],[34,34,34,-1,-1,0],[34,34,34,0,-1,0]],UNIFORM:[[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4]],DROP:[[34,34,34,2,2,3],[34,34,34,2,2,4],[34,34,34,2,2,5]]};function da(dm,em){this.id=dm;this.lang=em||"unknown";this.enabled=this.active=false;}l("shaka.player.TextTrack.compare",function(dm,em){return dm.lang<em.lang?-1:dm.lang>em.lang?1:0;});function ea(dm,em,fm,gm,hm,im,jm){this.id=dm;this.bandwidth=em||0;this.width=fm||0;this.height=gm||0;this.streamInfoID=hm;this.fbQualityLabel=im;this.fbQualityClass=jm;this.active=false;}function fa(dm,em){var fm=dm.width*dm.height,gm=em.width*em.height;return fm<gm?-1:fm>gm?1:dm.bandwidth<em.bandwidth?-1:dm.bandwidth>em.bandwidth?1:0;}l("shaka.player.VideoTrack.compare",fa);function ga(){var dm="CustomEvent" in i;if(dm)try{new CustomEvent("");}catch(em){dm=false;}dm||(i.CustomEvent=ha);}l("shaka.polyfill.CustomEvent.install",ga);function ha(dm,em){var fm=document.createEvent("CustomEvent"),gm=em||{bubbles:false,cancelable:false,detail:null};fm.initCustomEvent(dm,!!gm.bubbles,!!gm.cancelable,gm.detail);return fm;}function ia(){var dm=Element.prototype;dm.requestFullscreen=dm.requestFullscreen||dm.mozRequestFullScreen||dm.msRequestFullscreen||dm.webkitRequestFullscreen;dm=Document.prototype;dm.exitFullscreen=dm.exitFullscreen||dm.mozCancelFullScreen||dm.msExitFullscreen||dm.webkitExitFullscreen;"fullscreenElement" in document||Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement;}});document.addEventListener("webkitfullscreenchange",ja);document.addEventListener("webkitfullscreenerror",ja);document.addEventListener("mozfullscreenchange",ja);document.addEventListener("mozfullscreenerror",ja);document.addEventListener("MSFullscreenChange",ja);document.addEventListener("MSFullscreenError",ja);}l("shaka.polyfill.Fullscreen.install",ia);function ja(dm){var em=dm.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),em=new Event(em,dm);dm.target.dispatchEvent(em);}function ka(){return Promise.reject(Error("The key system specified is not supported."));}function la(dm){return null==dm?Promise.resolve():Promise.reject(Error("MediaKeys not supported."));}function ma(){throw new TypeError("Illegal constructor.");}ma.prototype.createSession=function(){};ma.prototype.setServerCertificate=function(){};function na(){throw new TypeError("Illegal constructor.");}na.prototype.getConfiguration=function(){};na.prototype.createMediaKeys=function(){};function oa(dm){this.c=[];this.b=[];this.Z=pa;if(dm)try{dm(this.X.bind(this),this.a.bind(this));}catch(em){this.a(em);}}var pa=0;function qa(){i.Promise||(i.Promise=oa,i.Promise.resolve=ra,i.Promise.reject=sa,i.Promise.all=ta,i.Promise.race=ua,i.setImmediate?(xa=function(dm){return i.setImmediate(dm);},ya=function(dm){return i.clearImmediate(dm);}):(xa=function(dm){return i.setTimeout(dm,0);},ya=function(dm){return i.clearTimeout(dm);}));}l("shaka.polyfill.Promise.install",qa);function ra(dm){var em=new oa();em.X(dm);return em;}function sa(dm){var em=new oa();em.a(dm);return em;}function ta(dm){function em(km,lm,mm){km.Z==pa&&(hm[lm]=mm,gm++,gm==hm.length&&km.X(hm));}var fm=new oa();if(!dm.length)return fm.X([]),fm;for(var gm=0,hm=Array(dm.length),im=fm.a.bind(fm),jm=0;jm<dm.length;++jm)dm[jm]&&dm[jm].then?dm[jm].then(em.bind(null,fm,jm),im):em(fm,jm,dm[jm]);return fm;}function ua(dm){for(var em=new oa(),fm=em.X.bind(em),gm=em.a.bind(em),hm=0;hm<dm.length;++hm)dm[hm]&&dm[hm].then?dm[hm].then(fm,gm):fm(dm[hm]);return em;}oa.prototype.then=function(dm,em){var fm=new oa();switch(this.Z){case 1:va(this,fm,dm);break;case 2:va(this,fm,em);break;case pa:this.c.push({Ea:fm,wa:dm}),this.b.push({Ea:fm,wa:em});}return fm;};oa.prototype.then=oa.prototype.then;oa.prototype.catch=function(dm){return this.then(void 0,dm);};oa.prototype["catch"]=oa.prototype.catch;oa.prototype.X=function(dm){if(this.Z==pa){this.ua=dm;this.Z=1;for(dm=0;dm<this.c.length;++dm)va(this,this.c[dm].Ea,this.c[dm].wa);this.c=[];this.b=[];}};oa.prototype.a=function(dm){if(this.Z==pa){this.ua=dm;this.Z=2;for(dm=0;dm<this.b.length;++dm)va(this,this.b[dm].Ea,this.b[dm].wa);this.c=[];this.b=[];}};function va(dm,em,fm){ab.push(function(){if(fm&&"function"==typeof fm){try{var hm=fm(this.ua);}catch(gm){em.a(gm);return;}hm instanceof oa?hm==em?em.a(new TypeError("Chaining cycle detected")):hm.then(em.X.bind(em),em.a.bind(em)):em.X(hm);}else 1==this.Z?em.X(this.ua):em.a(this.ua);}.bind(dm));null==za&&(za=xa(wa));}function wa(){for(;ab.length;){null!=za&&(ya(za),za=null);var dm=ab;ab=[];for(var em=0;em<dm.length;++em)dm[em]();}}function xa(){return 0;}function ya(){}var za=null,ab=[];function bb(){var dm=HTMLVideoElement.prototype;!dm.getVideoPlaybackQuality&&"webkitDroppedFrameCount" in dm&&(dm.getVideoPlaybackQuality=cb);}l("shaka.polyfill.VideoPlaybackQuality.install",bb);function cb(){return {droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0};}function db(dm,em){for(var fm=[],gm=0;gm<dm.length;++gm){for(var hm=false,im=0;im<fm.length&&!(hm=em?em(dm[gm],fm[im]):dm[gm]===fm[im]);++im);hm||fm.push(dm[gm]);}return fm;}function eb(){return Date.now()+fb;}var fb=0;function gb(dm){this.b=dm;this.c=0==hb;this.a=0;}var hb=1;function ib(dm){return dm.a<dm.b.byteLength;}function jb(dm){var em=dm.b.getUint8(dm.a);dm.a+=1;return em;}function kb(dm){var em=dm.b.getUint32(dm.a,dm.c);dm.a+=4;return em;}function lb(dm){var em,fm;dm.c?(em=dm.b.getUint32(dm.a,true),fm=dm.b.getUint32(dm.a+4,true)):(fm=dm.b.getUint32(dm.a,false),em=dm.b.getUint32(dm.a+4,false));if(2097151<fm)throw new RangeError("DataViewReader: Overflow reading 64-bit value.");dm.a+=8;return fm*Math.pow(2,32)+em;}function mb(dm){if(dm.a+16>dm.b.byteLength)throw new RangeError("DataViewReader: Read past end of DataView.");var em=new Uint8Array(dm.b.buffer,dm.a,16);dm.a+=16;return em;}function nb(dm,em){if(dm.a+em>dm.b.byteLength)throw new RangeError("DataViewReader: Skip past end of DataView.");dm.a+=em;}function ob(dm){this.b=dm;this.a=new gb(dm);pb||(pb=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])]);}var pb;function qb(dm){var em;em=rb(dm);if(7<em.length)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");for(var fm=0,gm=0;gm<em.length;gm++)fm=256*fm+em[gm];em=fm;fm=rb(dm);dm:{for(gm=0;gm<pb.length;gm++)if(ud(fm,pb[gm])){gm=true;break dm;}gm=false;};if(gm){fm=dm.b.byteLength-dm.a.a;}else{if(8==fm.length&&fm[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");for(var gm=fm[0]&(1<<8-fm.length)-1,hm=1;hm<fm.length;hm++)gm=256*gm+fm[hm];fm=gm;}fm=dm.a.a+fm<=dm.b.byteLength?fm:dm.b.byteLength-dm.a.a;gm=new DataView(dm.b.buffer,dm.b.byteOffset+dm.a.a,fm);nb(dm.a,fm);return new sb(em,gm);}function rb(dm){var em=jb(dm.a),fm;for(fm=1;8>=fm&&!(em&1<<8-fm);fm++);if(8<fm)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");var gm=new Uint8Array(fm);gm[0]=em;for(em=1;em<fm;em++)gm[em]=jb(dm.a);return gm;}function sb(dm,em){this.id=dm;this.a=em;}function tb(dm){if(8<dm.a.byteLength)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(8==dm.a.byteLength&&dm.a.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");for(var em=0,fm=0;fm<dm.a.byteLength;fm++)var gm=dm.a.getUint8(fm),em=256*em+gm;return em;}var ub={"output-restricted":"The required output protection is not available.","output-not-allowed":"The required output protection is not available.",expired:"The decryption key has expired.","internal-error":"The key system has encountered an unspecified error."};function vb(dm){this.c=Math.exp(Math.log(.5)/dm);this.a=this.b=0;}vb.prototype.sample=function(dm,em){var fm=Math.pow(this.c,dm);this.b=em*(1-fm)+fm*this.b;this.a+=dm;};function wb(dm){return dm.b/(1-Math.pow(dm.c,dm.a));}function xb(dm){var em=new CustomEvent(dm.type,{detail:dm.detail,bubbles:!!dm.bubbles}),fm;for(fm in dm)fm in em||(em[fm]=dm[fm]);return em;}function yb(dm){return new CustomEvent("error",{detail:dm,bubbles:true});}function zb(dm,em,fm){cc(em);cc(fm);return fm==em||dm>=ac&&fm==em.split("-")[0]||dm>=bc&&fm.split("-")[0]==em.split("-")[0]?true:false;}var ac=1,bc=2;function cc(dm){dm=dm.toLowerCase().split("-");var em=dc[dm[0]];em&&(dm[0]=em);return dm.join("-");}var dc={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};function ec(dm){return Object.keys(dm).map(function(em){return dm[em];});}function fc(dm,em){return ic(dm,em,"boolean");}function gc(dm,em,fm){dm=ic(dm,em,"number");if(null==dm)return null;if(isNaN(dm)||dm==Number.NEGATIVE_INFINITY||dm==Number.POSITIVE_INFINITY)throw new RangeError("'"+em+"' must be finite.");if(null!=fm&&dm<fm)throw new RangeError("'"+em+"' must be >= "+fm);return dm;}function hc(dm,em){return ic(dm,em,"string");}function ic(dm,em,fm){dm=dm[em];if(null==dm)return null;if(typeof dm!=fm)throw new TypeError("'"+em+"' must be a "+fm+".");return dm;}function jc(dm,em,fm){dm=dm[em];if(null==dm)return null;if(!(dm instanceof fm))throw new TypeError("'"+em+"' must be an instance of "+fm.name+".");return dm;}function kc(){this.a={};}kc.prototype.push=function(dm,em){this.a.hasOwnProperty(dm)?this.a[dm].push(em):this.a[dm]=[em];};kc.prototype.set=function(dm,em){this.a[dm]=em;};kc.prototype.get=function(dm){return (dm=this.a[dm])?dm.slice():null;};function lc(dm){var em=[],fm;for(fm in dm.a)em.push.apply(em,dm.a[fm]);return em;}function mc(dm,em,fm){if(dm=dm.a[em])for(em=0;em<dm.length;++em)dm[em]==fm&&(dm.splice(em,1),--em);}function nc(dm){var em=[],fm;for(fm in dm.a)em.push(fm);return em;}function oc(){this.a=new kc();}oc.prototype.destroy=function(){qc(this);this.a=null;};function pc(dm,em,fm,gm){em=new rc(em,fm,gm);dm.a.push(fm,em);}oc.prototype.ra=function(dm,em){for(var fm=this.a.get(em)||[],gm=0;gm<fm.length;++gm){var hm=fm[gm];hm.target==dm&&(hm.ra(),mc(this.a,em,hm));}};function qc(dm){for(var em=lc(dm.a),fm=0;fm<em.length;++fm)em[fm].ra();dm.a.a={};}function rc(dm,em,fm){this.target=dm;this.type=em;this.a=fm;this.target.addEventListener(em,fm,false);}rc.prototype.ra=function(){this.target&&(this.target.removeEventListener(this.type,this.a,false),this.a=this.target=null);};function sc(dm){this.va=new kc();this.S=dm;}l("shaka.util.FakeEventTarget",sc);sc.prototype.addEventListener=function(dm,em,fm){fm||this.va.push(dm,em);};sc.prototype.removeEventListener=function(dm,em,fm){fm||mc(this.va,dm,em);};sc.prototype.dispatchEvent=function(dm){dm.hasOwnProperty("srcElement")||(delete dm.srcElement,Object.defineProperty(dm,"srcElement",{get:function(){return null;}}));if(dm.hasOwnProperty("target")){dm.target=this;}else{delete dm.target;var em=this;Object.defineProperty(dm,"target",{get:function(){return em;},set:function(gm){em=gm;}});}if(dm.hasOwnProperty("currentTarget")){dm.currentTarget=null;}else{delete dm.currentTarget;var fm=null;Object.defineProperty(dm,"currentTarget",{get:function(){return fm;},set:function(gm){fm=gm;}});}return tc(this,dm);};function tc(dm,em){em.currentTarget=dm;for(var fm=dm.va.get(em.type)||[],gm=0;gm<fm.length;++gm){var hm=fm[gm];try{hm.handleEvent?hm.handleEvent(em):hm.call(dm,em);}catch(im){}}dm.S&&em.bubbles&&tc(dm.S,em);return em.defaultPrevented;}function uc(dm){sc.call(this,null);this.a=new vb(3);this.g=new vb(10);this.h=dm||500000;this.f=0;}m(uc,sc);l("shaka.util.EWMABandwidthEstimator",uc);uc.prototype.sample=function(dm,em){if(!(65536>em)){dm=Math.max(dm,50);var fm=8000*em/dm,gm=dm/1000;this.a.sample(gm,fm);this.g.sample(gm,fm);this.dispatchEvent(xb({type:"bandwidth"}));this.f=Date.now();}};uc.prototype.getBandwidth=function(){return .5>this.a.a?this.h:Math.min(wb(this.a),wb(this.g));};uc.prototype.getDataAge=function(){return (Date.now()-this.f)/1000;};uc.prototype.supportsCaching=function(){return false;};function vc(dm,em,fm){uc.call(this,fm);this.c=dm||0;this.b=void 0===em?Infinity:em;}m(vc,uc);l("shaka.util.EWMACacheBandwidthEstimator",vc);vc.prototype.sample=function(dm,em){dm<=this.c&&8000*em/dm>this.b||uc.prototype.sample.call(this,dm,em);};vc.prototype.supportsCaching=function(){return Infinity!==this.b&&!!this.c;};function wc(){uc.call(this);}m(wc,uc);l("shaka.util.EWMASignedURLBandwidthEstimator",wc);wc.prototype.supportsCaching=function(){return true;};function xc(){var dm,em,fm=new Promise(function(gm,hm){dm=gm;em=hm;});fm.resolve=dm;fm.reject=em;fm.destroy=xc.prototype.destroy;return fm;}xc.prototype.destroy=function(){this.catch(function(){});var dm=Error("Destroyed!");dm.type="destroy";this.reject(dm);};function yc(dm){dm.split("").reduce(function(em,fm,gm){return em+(gm&&0==gm%4?" "+fm:fm);});}function zc(){this.g=new xc();this.f=false;this.a=null;this.b=[];this.c=null;}function ad(dm,em){if(dm.f)throw Error("Cannot append to a running task!");dm.b.push(em);}zc.prototype.start=function(){if(this.f)throw Error("Task already started!");this.f=true;this.b.unshift(function(){});bd(this,void 0);};zc.prototype.end=function(){this.b.splice(1);};function bd(dm,em){var fm=dm.b[0](em),gm;fm?(gm=fm[0],dm.c=fm[1]):(gm=Promise.resolve(),dm.c=null);gm.then(dd(dm,function(hm){this.a?(this.b=[],this.c=null,cd(this)):(this.b.shift(),this.b.length?bd(this,hm):(this.g.resolve(hm),this.c=null));})).catch(dd(dm,function(hm){this.b=[];this.c=null;this.a?cd(this):this.g.reject(hm);}));}function cd(dm){var em=Error("Task aborted.");em.type="aborted";dm.g.reject(em);i.setTimeout(function(){this.a.resolve();this.a=null;}.bind(dm),5);}function dd(dm,em){return em.bind(dm);}function ed(dm,em,fm){MediaSource.isTypeSupported(em);em=dm.addSourceBuffer(em);this.h=dm;this.c=em;this.l=fm;this.i=new oc();this.v=null;this.b=[];this.o=0;this.f=this.a=null;this.m=0;pc(this.i,this.c,"updateend",this.A.bind(this));}var fd=1/60;ed.prototype.destroy=function(){ld(this).catch(function(){});this.f&&this.f.destroy();this.b=this.a=this.f=null;this.i.destroy();this.h=this.c=this.i=null;};function gd(dm,em){for(var fm=dm.c.buffered,gm=0;gm<fm.length;++gm){var hm=fm.start(gm)-fd,im=fm.end(gm)+fd;if(em>=hm&&em<=im)return fm.end(gm)-em;}return 0;}function hd(dm,em,fm){em=em.a?em.a-em.b:1;var gm=new bh();gm.a=3;gm.j=1000*em;gm.c=1000*dm.m;gm.o=dm.v;gm.l=fm;return gm;}function id(dm,em,fm,gm,hm){if(dm.a)return dm=Error("Cannot fetch ("+dm.j+"): previous operation not complete."),dm.type="stream",Promise.reject(dm);dm.a=new zc();fm!=dm.c.timestampOffset&&(dm.c.timestampOffset=fm);fm=hd(dm,em,hm);var im=lh(em.url,fm,dm.l),jm=ih.prototype.f.bind(em.url),km=0;gm&&ad(dm.a,function(){return [gm.then(function(nm){nm.ha>km&&(km=nm.ha);return od(this,nm);}.bind(this)),this.g.bind(this)];}.bind(dm));ad(dm.a,dd(dm,function(){return [im.then(function(nm){nm.ha>km&&(km=nm.ha);this.l.getBandwidth();return od(this,nm);}.bind(this)),function(){jm();this.g();}.bind(this)];}));var lm=0==dm.c.buffered.length&&0==dm.b.length,mm=null;ad(dm.a,function(){if(0==this.c.buffered.length){var nm=Error("Failed to buffer segment ("+this.j+").");nm.type="stream";return [Promise.reject(nm)];}lm&&(nm=em.b,mm=this.c.buffered.start(0)-nm);nm=wh(this.b,em.b);0<=nm?this.b.splice(nm+1,0,em):this.b.push(em);}.bind(dm));return nd(dm).then(function(){return Promise.resolve({W:mm,nb:km});}.bind(dm));}function jd(dm){if(dm.a)return dm=Error("Cannot clear ("+dm.j+"): previous operation not complete."),dm.type="stream",Promise.reject(dm);dm.a=new zc();ad(dm.a,function(){var em;em:if(0==this.c.buffered.length){em=Promise.resolve();}else{try{this.c.remove(0,this.h.duration);}catch(fm){em=Promise.reject(fm);break em;}this.b=[];em=this.f=new xc();};return [em,this.g.bind(this)];}.bind(dm));return nd(dm);}function kd(dm,em){if(dm.a){var fm=Error("Cannot clearAfter ("+dm.j+"): previous operation not complete.");fm.type="stream";return Promise.reject(fm);}dm.a=new zc();ad(dm.a,function(){return [pd(this,em),this.g.bind(this)];}.bind(dm));return nd(dm);}function ld(dm){dm.a?(dm=dm.a,dm.a?dm=dm.a:dm.f?(dm.c&&dm.c(),dm.a=new xc(),dm=dm.a):(dm.f=true,dm=Promise.resolve())):dm=Promise.resolve();return dm;}function md(dm,em){for(var fm=dm.c.buffered,gm=em,hm=0;hm<fm.length;hm++)if(em<=fm.start(hm)){gm=fm.start(hm);break;}return gm;}function nd(dm){dm.a.start();return dm.a.g.then(dd(dm,function(){this.a=null;})).catch(dd(dm,function(em){this.a=null;return Promise.reject(em);}));}function od(dm,em){try{dm.c.appendBuffer(em);}catch(fm){return Promise.reject(fm);}dm.f=new xc();return dm.f;}function pd(dm,em){if(0==dm.c.buffered.length)return Promise.resolve();var fm=wh(dm.b,em);if(-1==fm||fm==dm.b.length-1)return Promise.resolve();try{dm.c.remove(dm.b[fm+1].b,dm.h.duration);}catch(gm){return Promise.reject(gm);}dm.b=dm.b.slice(0,fm+1);dm.f=new xc();return dm.f;}ed.prototype.g=function(){this.f&&"open"==this.h.readyState&&this.c.abort();};ed.prototype.A=function(){this.f&&(this.f.resolve(),this.f=null);};function qd(dm){return String.fromCharCode.apply(null,dm);}l("shaka.util.Uint8ArrayUtils.toString",qd);function rd(dm){for(var em=new Uint8Array(dm.length),fm=0;fm<dm.length;++fm)em[fm]=dm.charCodeAt(fm);return em;}l("shaka.util.Uint8ArrayUtils.fromString",rd);l("shaka.util.Uint8ArrayUtils.toBase64",function(dm,em){var fm=void 0==em?true:em,gm=i.btoa(qd(dm)).replace(/\+/g,"-").replace(/\//g,"_");return fm?gm:gm.replace(/=*$/,"");});function sd(dm){return rd(i.atob(dm.replace(/-/g,"+").replace(/_/g,"/")));}l("shaka.util.Uint8ArrayUtils.fromBase64",sd);l("shaka.util.Uint8ArrayUtils.fromHex",function(dm){for(var em=new Uint8Array(dm.length/2),fm=0;fm<dm.length;fm+=2)em[fm/2]=i.parseInt(dm.substr(fm,2),16);return em;});function td(dm){for(var em="",fm=0;fm<dm.length;++fm){var gm=dm[fm].toString(16);1==gm.length&&(gm="0"+gm);em+=gm;}return em;}l("shaka.util.Uint8ArrayUtils.toHex",td);function ud(dm,em){if(!dm&&!em)return true;if(!dm||!em||dm.length!=em.length)return false;for(var fm=0;fm<dm.length;++fm)if(dm[fm]!=em[fm])return false;return true;}function vd(){this.h=this.a="";this.l=false;this.o=this.m=null;this.i=this.g=false;this.j=this.f="";this.c=null;this.b=[];}function wd(dm,em){var fm=new vd();fm.a=dm.a;fm.h=dm.h;fm.l=dm.l;fm.m=dm.m;fm.o=dm.o;fm.g=dm.g;fm.i=dm.i;fm.f=dm.f;fm.j=dm.j;fm.c=dm.c?new Uint8Array(dm.c.buffer):null;xd(fm,dm.b);xd(fm,em.b);return fm;}function xd(dm,em){var fm=dm.b.concat(em.map(function(gm){return {initData:new Uint8Array(gm.initData.buffer),initDataType:gm.initDataType};}));dm.b=db(fm,yd);}function yd(dm,em){return dm.initDataType==em.initDataType&&ud(dm.initData,em.initData);}function zd(dm,em,fm,gm){this.a=[];gm&&this.a.push(gm);}l("shaka.player.DrmSchemeInfo",zd);zd.DistinctiveIdentifier={OPTIONAL:0,REQUIRED:1};zd.PersistentState={OPTIONAL:0,REQUIRED:1};zd.createUnencrypted=function(){return new zd(0,0,0,null);};function ae(dm,em){try{var gm=new ce(dm,em);return Promise.resolve(gm);}catch(fm){return Promise.reject(fm);}}function be(dm){var em=this.mediaKeys;em&&em!=dm&&ee(em,null);delete this.mediaKeys;(this.mediaKeys=dm)&&ee(dm,this);return Promise.resolve();}function ce(dm,em){this.a=this.keySystem=dm;var fm=true;"org.w3.clearkey"==dm&&(this.a="webkit-org.w3.clearkey",fm=false);var gm=false,hm;hm=document.getElementsByTagName("video");hm=hm.length?hm[0]:document.createElement("video");for(var im=0;im<em.length;++im){var jm=em[im],km={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:jm.initDataTypes,sessionTypes:["temporary"]},lm=false;if(jm.audioCapabilities)for(var mm=0;mm<jm.audioCapabilities.length;++mm){var nm=jm.audioCapabilities[mm];nm.contentType&&(lm=true,hm.canPlayType(nm.contentType.split(";")[0],this.a)&&(km.audioCapabilities.push(nm),gm=true));}if(jm.videoCapabilities)for(mm=0;mm<jm.videoCapabilities.length;++mm)nm=jm.videoCapabilities[mm],nm.contentType&&(lm=true,hm.canPlayType(nm.contentType,this.a)&&(km.videoCapabilities.push(nm),gm=true));lm||(gm=hm.canPlayType("video/mp4",this.a)||hm.canPlayType("video/webm",this.a));"required"==jm.persistentState&&(fm?(km.persistentState="required",km.sessionTypes=["persistent-license"]):gm=false);if(gm){this.b=km;return;}}fm="Unsupported keySystem";if("org.w3.clearkey"==dm||"com.widevine.alpha"==dm)fm="None of the requested configurations were supported.";fm=Error(fm);fm.name="NotSupportedError";fm.code=DOMException.NOT_SUPPORTED_ERR;throw fm;}ce.prototype.createMediaKeys=function(){var dm=new de(this.a);return Promise.resolve(dm);};ce.prototype.getConfiguration=function(){return this.b;};function de(dm){this.g=dm;this.b=null;this.a=new oc();this.c=[];this.f={};}function ee(dm,em){dm.b=em;qc(dm.a);em&&(pc(dm.a,em,"webkitneedkey",dm.Hb.bind(dm)),pc(dm.a,em,"webkitkeymessage",dm.Gb.bind(dm)),pc(dm.a,em,"webkitkeyadded",dm.Eb.bind(dm)),pc(dm.a,em,"webkitkeyerror",dm.Fb.bind(dm)));}j=de.prototype;j.createSession=function(dm){var em=dm||"temporary";if("temporary"!=em&&"persistent-license"!=em)throw new TypeError("Session type "+dm+" is unsupported on this platform.");dm=this.b||document.createElement("video");dm.src||(dm.src="about:blank");em=new ge(dm,this.g,em);this.c.push(em);return em;};j.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."));};j.Hb=function(dm){dm=xb({type:"encrypted",initDataType:"webm",initData:dm.initData});this.b.dispatchEvent(dm);};j.Gb=function(dm){var em=fe(this,dm.sessionId);em&&(dm=xb({type:"message",messageType:void 0==em.keyStatuses.Ba()?"licenserequest":"licenserenewal",message:dm.message}),em.b&&(em.b.resolve(),em.b=null),em.dispatchEvent(dm));};j.Eb=function(dm){if(dm=fe(this,dm.sessionId))ie(dm,"usable"),dm.a&&dm.a.resolve(),dm.a=null;};j.Fb=function(dm){var em=fe(this,dm.sessionId);if(em){var fm=Error("EME v0.1b key error");fm.errorCode=dm.errorCode;fm.errorCode.systemCode=dm.systemCode;!dm.sessionId&&em.b?(fm.method="generateRequest",45==dm.systemCode&&(fm.message="Unsupported session type."),em.b.reject(fm),em.b=null):dm.sessionId&&em.a?(fm.method="update",em.a.reject(fm),em.a=null):(fm=dm.systemCode,dm.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?ie(em,"output-restricted"):1==fm?ie(em,"expired"):ie(em,"internal-error"));}};function fe(dm,em){var fm=dm.f[em];return fm?fm:(fm=dm.c.shift())?(fm.sessionId=em,dm.f[em]=fm):null;}function ge(dm,em,fm){sc.call(this,null);this.f=dm;this.h=false;this.a=this.b=null;this.c=em;this.g=fm;this.sessionId="";this.expiration=NaN;this.closed=new xc();this.keyStatuses=new je();}m(ge,sc);function he(dm,em,fm){if(dm.h)return Promise.reject(Error("The session is already initialized."));dm.h=true;var gm;try{if("persistent-license"==dm.g){if(fm){gm=rd("LOAD_SESSION|"+fm);}else{var im=new Uint8Array(em);gm=rd("PERSISTENT|"+qd(im));}}else gm=new Uint8Array(em);}catch(hm){return Promise.reject(hm);}dm.b=new xc();try{dm.f.webkitGenerateKeyRequest(dm.c,gm);}catch(jm){if("InvalidStateError"!=jm.name)return dm.b=null,Promise.reject(jm);setTimeout(function(){try{this.f.webkitGenerateKeyRequest(this.c,gm);}catch(km){this.b.reject(km),this.b=null;}}.bind(dm),10);}return dm.b;}j=ge.prototype;j.Ja=function(dm,em){if(this.a){this.a.then(this.Ja.bind(this,dm,em)).catch(this.Ja.bind(this,dm,em));}else{this.a=dm;var fm,gm;"webkit-org.w3.clearkey"==this.c?(fm=qd(new Uint8Array(em)),gm=JSON.parse(fm),"oct"!=gm.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),fm=sd(gm.keys[0].k),gm=sd(gm.keys[0].kid)):(fm=new Uint8Array(em),gm=null);try{this.f.webkitAddKey(this.c,fm,gm,this.sessionId);}catch(hm){this.a.reject(hm),this.a=null;}}};function ie(dm,em){dm.keyStatuses.Ga(em);var fm=xb({type:"keystatuseschange"});dm.dispatchEvent(fm);}j.generateRequest=function(dm,em){return he(this,em,null);};j.load=function(dm){return "persistent-license"==this.g?he(this,null,dm):Promise.reject(Error("Not a persistent session."));};j.update=function(dm){var em=new xc();this.Ja(em,dm);return em;};j.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;this.f.webkitCancelKeyRequest(this.c,this.sessionId);}this.closed.resolve();return this.closed;};j.remove=function(){return "persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close();};function je(){this.size=0;this.a=void 0;}var ke;j=je.prototype;j.Ga=function(dm){this.size=void 0==dm?0:1;this.a=dm;};j.Ba=function(){return this.a;};j.forEach=function(dm){this.a&&dm(ke,this.a);};j.get=function(dm){if(this.has(dm))return this.a;};j.has=function(dm){var em=ke;return this.a&&ud(new Uint8Array(dm),new Uint8Array(em))?true:false;};function le(dm){this.systemIds=[];this.cencKeyIds=[];this.a=[];dm=new gb(new DataView(dm.buffer));try{for(;ib(dm);){var fm=dm.a,gm=kb(dm),hm=kb(dm);1==gm?gm=lb(dm):0==gm&&(gm=dm.b.byteLength-fm);if(1886614376!=hm){nb(dm,gm-(dm.a-fm));}else{var im=jb(dm);if(1<im){nb(dm,gm-(dm.a-fm));}else{nb(dm,3);var jm=td(mb(dm)),km=[];if(0<im)for(var lm=kb(dm),mm=0;mm<lm;++mm){var nm=td(mb(dm));km.push(nm);}var om=kb(dm);nb(dm,om);this.cencKeyIds.push.apply(this.cencKeyIds,km);this.systemIds.push(jm);this.a.push({start:fm,end:dm.a-1});dm.a!=fm+gm&&nb(dm,gm-(dm.a-fm));}}}}catch(em){}}function me(dm,em){try{var gm=new ne(dm,em);return Promise.resolve(gm);}catch(fm){return Promise.reject(fm);}}function ne(dm,em){this.keySystem=dm;for(var fm=false,gm=0;gm<em.length;++gm){var hm=em[gm],im={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:hm.initDataTypes,sessionTypes:["temporary"]},jm=false;if(hm.audioCapabilities)for(var km=0;km<hm.audioCapabilities.length;++km){var lm=hm.audioCapabilities[km];if(lm.contentType){var jm=true,mm=lm.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,mm)&&(im.audioCapabilities.push(lm),fm=true);}}if(hm.videoCapabilities)for(km=0;km<hm.videoCapabilities.length;++km)lm=hm.videoCapabilities[km],lm.contentType&&(jm=true,mm=lm.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,mm)&&(im.videoCapabilities.push(lm),fm=true));jm||(fm=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4"));"required"==hm.persistentState&&(im.persistentState="required",im.sessionTypes=["persistent-license"]);if(fm){this.a=im;return;}}fm=Error("Unsupported keySystem");fm.name="NotSupportedError";fm.code=DOMException.NOT_SUPPORTED_ERR;throw fm;}ne.prototype.createMediaKeys=function(){var dm=new pe(this.keySystem);return Promise.resolve(dm);};ne.prototype.getConfiguration=function(){return this.a;};function oe(dm){var em=this.mediaKeys;em&&em!=dm&&qe(em,null);delete this.mediaKeys;return (this.mediaKeys=dm)?qe(dm,this):Promise.resolve();}function pe(dm){this.a=new MSMediaKeys(dm);this.b=new oc();}pe.prototype.createSession=function(dm){if("temporary"!=(dm||"temporary"))throw new TypeError("Session type "+dm+" is unsupported on this platform.");return new re(this.a);};pe.prototype.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."));};function qe(dm,em){function fm(){em.msSetMediaKeys(gm.a);em.removeEventListener("loadedmetadata",fm);}qc(dm.b);if(!em)return Promise.resolve();pc(dm.b,em,"msneedkey",se);var gm=dm;try{return 1<=em.readyState?em.msSetMediaKeys(dm.a):em.addEventListener("loadedmetadata",fm),Promise.resolve();}catch(hm){return Promise.reject(hm);}}function re(dm){sc.call(this,null);this.c=null;this.g=dm;this.b=this.a=null;this.f=new oc();this.sessionId="";this.expiration=NaN;this.closed=new xc();this.keyStatuses=new ve();}m(re,sc);j=re.prototype;j.generateRequest=function(dm,em){this.a=new xc();try{this.c=this.g.createSession("video/mp4",new Uint8Array(em),null),pc(this.f,this.c,"mskeymessage",this.wb.bind(this)),pc(this.f,this.c,"mskeyadded",this.ub.bind(this)),pc(this.f,this.c,"mskeyerror",this.vb.bind(this)),ue(this,"status-pending");}catch(fm){this.a.reject(fm);}return this.a;};j.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"));};j.update=function(dm){this.b=new xc();try{this.c.update(new Uint8Array(dm));}catch(em){this.b.reject(em);}return this.b;};j.close=function(){try{this.c.close(),this.closed.resolve(),qc(this.f);}catch(dm){this.closed.reject(dm);}return this.closed;};j.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"));};function se(dm){var em=dm.initData;if(em){var fm=new le(em);if(1>=fm.a.length){dm=em;}else{var gm=[];for(dm=0;dm<fm.a.length;dm++)gm.push(em.subarray(fm.a[dm].start,fm.a[dm].end+1));em=db(gm,te);for(dm=fm=0;dm<em.length;dm++)fm+=em[dm].length;fm=new Uint8Array(fm);for(dm=gm=0;dm<em.length;dm++)fm.set(em[dm],gm),gm+=em[dm].length;dm=fm;}}else dm=em;dm=xb({type:"encrypted",initDataType:"cenc",initData:dm});this.dispatchEvent(dm);}function te(dm,em){return ud(dm,em);}j.wb=function(dm){this.a&&(this.a.resolve(),this.a=null);dm=xb({type:"message",messageType:void 0==this.keyStatuses.Ba()?"licenserequest":"licenserenewal",message:dm.message.buffer});this.dispatchEvent(dm);};j.ub=function(){this.a?(this.a.resolve(),this.a=null):this.b&&(ue(this,"usable"),this.b.resolve(),this.b=null);};j.vb=function(){var dm=Error("EME v20140218 key error");dm.errorCode=this.c.error;if(null!=this.a){this.a.reject(dm),this.a=null;}else if(null!=this.b){this.b.reject(dm),this.b=null;}else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:ue(this,"output-not-allowed");default:ue(this,"internal-error");}};function ue(dm,em){dm.keyStatuses.Ga(em);var fm=xb({type:"keystatuseschange"});dm.dispatchEvent(fm);}function ve(){this.size=0;this.a=void 0;}var we;j=ve.prototype;j.Ga=function(dm){this.size=void 0==dm?0:1;this.a=dm;};j.Ba=function(){return this.a;};j.forEach=function(dm){this.a&&dm(we,this.a);};j.get=function(dm){if(this.has(dm))return this.a;};j.has=function(dm){var em=we;return this.a&&ud(new Uint8Array(dm),new Uint8Array(em))?true:false;};function xe(){Navigator.prototype.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?(ke=(new Uint8Array([0])).buffer,Navigator.prototype.requestMediaKeySystemAccess=ae,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=be,i.MediaKeys=de,i.MediaKeySystemAccess=ce):i.MSMediaKeys?(we=(new Uint8Array([0])).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=oe,i.MediaKeys=pe,i.MediaKeySystemAccess=ne,Navigator.prototype.requestMediaKeySystemAccess=me):(Navigator.prototype.requestMediaKeySystemAccess=ka,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=la,i.MediaKeys=ma,i.MediaKeySystemAccess=na));}l("shaka.polyfill.MediaKeys.install",xe);l("shaka.polyfill.installAll",function(){ga();ia();bb();qa();xe();});var ye=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function ze(dm){var em;dm instanceof ze?(af(this,dm.V),this.$=dm.$,this.P=dm.P,bf(this,dm.ga),this.R=dm.R,cf(this,dm.a.clone()),this.Y=dm.Y):dm&&(em=String(dm).match(ye))?(af(this,em[1]||"",true),this.$=df(em[2]||""),this.P=df(em[3]||"",true),bf(this,em[4]),this.R=df(em[5]||"",true),cf(this,em[6]||"",true),this.Y=df(em[7]||"")):this.a=new mf(null);}j=ze.prototype;j.V="";j.$="";j.P="";j.ga=null;j.R="";j.Y="";j.toString=function(){var dm=[],em=this.V;em&&dm.push(ef(em,gf,true),":");if(em=this.P){dm.push("//");var fm=this.$;fm&&dm.push(ef(fm,gf,true),"@");dm.push(encodeURIComponent(em).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));em=this.ga;null!=em&&dm.push(":",String(em));}if(em=this.R)this.P&&"/"!=em.charAt(0)&&dm.push("/"),dm.push(ef(em,"/"==em.charAt(0)?jf:hf,true));(em=this.a.toString())&&dm.push("?",em);(em=this.Y)&&dm.push("#",ef(em,lf));return dm.join("");};j.resolve=function(dm){var em=this.clone();"data"===em.V&&(em=new ze());var fm=!!dm.V;fm?af(em,dm.V):fm=!!dm.$;fm?em.$=dm.$:fm=!!dm.P;fm?em.P=dm.P:fm=null!=dm.ga;var gm=dm.R;if(fm){bf(em,dm.ga);}else if(fm=!!dm.R){if("/"!=gm.charAt(0))if(this.P&&!this.R){gm="/"+gm;}else{var hm=em.R.lastIndexOf("/");-1!=hm&&(gm=em.R.substr(0,hm+1)+gm);}if(".."==gm||"."==gm){gm="";}else if(-1!=gm.indexOf("./")||-1!=gm.indexOf("/.")){for(var hm=0==gm.lastIndexOf("/",0),gm=gm.split("/"),im=[],jm=0;jm<gm.length;){var km=gm[jm++];"."==km?hm&&jm==gm.length&&im.push(""):".."==km?((1<im.length||1==im.length&&""!=im[0])&&im.pop(),hm&&jm==gm.length&&im.push("")):(im.push(km),hm=true);}gm=im.join("/");}}fm?em.R=gm:fm=""!==dm.a.toString();fm?cf(em,dm.a.clone()):fm=!!dm.Y;fm&&(em.Y=dm.Y);return em;};j.clone=function(){return new ze(this);};function af(dm,em,fm){dm.V=fm?df(em,true):em;dm.V&&(dm.V=dm.V.replace(/:$/,""));}function bf(dm,em){if(em){em=Number(em);if(isNaN(em)||0>em)throw Error("Bad port number "+em);dm.ga=em;}else dm.ga=null;}function cf(dm,em,fm){em instanceof mf?dm.a=em:(fm||(em=ef(em,kf)),dm.a=new mf(em));}function df(dm,em){return dm?em?decodeURI(dm):decodeURIComponent(dm):"";}function ef(dm,em,fm){return "string"==typeof dm?(dm=encodeURI(dm).replace(em,ff),fm&&(dm=dm.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),dm):null;}function ff(dm){dm=dm.charCodeAt(0);return "%"+(dm>>4&15).toString(16)+(dm&15).toString(16);}var gf=/[#\/\?@]/g,hf=/[\#\?:]/g,jf=/[\#\?]/g,kf=/[\#\?@]/g,lf=/#/g;function mf(dm){this.b=dm||null;}mf.prototype.a=null;mf.prototype.c=null;function nf(dm,em,fm){if(!dm.a&&(dm.a={},dm.c=0,dm.b))for(var gm=dm.b.split("&"),hm=0;hm<gm.length;hm++){var im=gm[hm].indexOf("="),jm=null,km=null;0<=im?(jm=gm[hm].substring(0,im),km=gm[hm].substring(im+1)):jm=gm[hm];jm=decodeURIComponent(jm.replace(/\+/g," "));km=km||"";nf(dm,jm,decodeURIComponent(km.replace(/\+/g," ")));}dm.b=null;(gm=dm.a.hasOwnProperty(em)&&dm.a[em])||(dm.a[em]=gm=[]);gm.push(fm);dm.c++;}mf.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return "";var dm=[],em;for(em in this.a)for(var fm=encodeURIComponent(em),gm=this.a[em],hm=0;hm<gm.length;hm++){var im=fm;""!==gm[hm]&&(im+="="+encodeURIComponent(gm[hm]));dm.push(im);}return this.b=dm.join("&");};mf.prototype.clone=function(){var dm=new mf();dm.b=this.b;if(this.a){var em={},fm;for(fm in this.a)em[fm]=this.a[fm].concat();dm.a=em;dm.c=this.c;}return dm;};function of(dm,em,fm){dm=(new DOMParser()).parseFromString(dm,"text/xml");if(!dm)return null;em=em||[new ze("")];fm=fm||[new ze("")];return mg({fb:em,u:fm},dm,pf);}l("shaka.dash.mpd.parseMpd",of);function pf(){this.id=this.url=null;this.type="static";this.b=this.j=this.u=this.fb=null;this.h=5;this.f=this.c=this.g=null;this.i=1;this.a=[];}function qf(){this.g=this.f=this.c=this.u=this.a=this.start=this.id=null;this.b=[];}function rf(){this.i=this.b=this.height=this.width=this.contentType=this.lang=this.group=this.id=null;this.c=false;this.h=this.g=this.f=this.u=null;this.j=[];this.a=[];}function sf(){this.value=null;}function tf(){this.contentType=this.lang=this.id=null;}function uf(){this.a=this.b=this.g=this.u=this.fbQualityClass=this.fbQualityLabel=this.h=this.f=this.height=this.width=this.bandwidth=this.lang=this.id=null;this.c=[];}function vf(){this.b=this.a=this.c=this.f=null;}function wf(){this.parsedPssh=this.psshBox=null;}function xf(){this.url=null;}function yf(){this.url=null;}function zf(){this.u=null;this.h=1;this.c=this.b=this.f=this.a=this.g=null;}zf.prototype.clone=function(){var dm=new zf();dm.u=qg(this.u);dm.h=this.h;dm.g=this.g;dm.a=rg(this.a);dm.f=rg(this.f);dm.b=rg(this.b);dm.c=rg(this.c);return dm;};function ag(){this.a=this.url=null;}ag.prototype.clone=function(){var dm=new ag();dm.url=qg(this.url);dm.a=rg(this.a);return dm;};function bg(){this.a=this.url=null;}bg.prototype.clone=function(){var dm=new bg();dm.url=qg(this.url);dm.a=rg(this.a);return dm;};function cg(){this.u=null;this.a=1;this.c=this.g=null;this.i=0;this.h=null;this.b=[];this.f=null;}cg.prototype.clone=function(){var dm=new cg();dm.u=qg(this.u);dm.a=this.a;dm.g=this.g;dm.c=this.c;dm.i=this.i;dm.h=rg(this.h);dm.b=qg(this.b)||[];dm.f=rg(this.f);return dm;};function dg(){this.a=this.b=null;}dg.prototype.clone=function(){var dm=new dg();dm.b=qg(this.b);dm.a=rg(this.a);return dm;};function eg(){this.a=1;this.b=this.i=null;this.j=0;this.c=this.g=this.f=this.h=null;}eg.prototype.clone=function(){var dm=new eg();dm.a=this.a;dm.i=this.i;dm.b=this.b;dm.j=this.j;dm.h=this.h;dm.f=this.f;dm.g=this.g;dm.c=rg(this.c);return dm;};function fg(){this.a=[];}fg.prototype.clone=function(){var dm=new fg();dm.a=qg(this.a)||[];return dm;};function gg(){this.c=this.a=this.b=null;}gg.prototype.clone=function(){var dm=new gg();dm.b=this.b;dm.a=this.a;dm.c=this.c;return dm;};function hg(dm,em){this.fa=dm;this.end=em;}hg.prototype.clone=function(){return new hg(this.fa,this.end);};pf.TAG_NAME="MPD";qf.TAG_NAME="Period";rf.TAG_NAME="AdaptationSet";sf.TAG_NAME="Role";tf.TAG_NAME="ContentComponent";uf.TAG_NAME="Representation";vf.TAG_NAME="ContentProtection";wf.TAG_NAME="cenc:pssh";xf.TAG_NAME="BaseURL";yf.TAG_NAME="Location";zf.TAG_NAME="SegmentBase";ag.TAG_NAME="RepresentationIndex";bg.TAG_NAME="Initialization";cg.TAG_NAME="SegmentList";dg.TAG_NAME="SegmentURL";eg.TAG_NAME="SegmentTemplate";fg.TAG_NAME="SegmentTimeline";gg.TAG_NAME="S";pf.prototype.parse=function(dm,em){this.url=dm.fb;this.id=sg(em,"id",zg);this.type=sg(em,"type",zg)||"static";this.b=sg(em,"mediaPresentationDuration",ug);this.h=sg(em,"minBufferTime",ug,this.h);this.g=sg(em,"minimumUpdatePeriod",ug,this.g);this.c=sg(em,"availabilityStartTime",tg,this.c);this.f=sg(em,"timeShiftBufferDepth",ug,this.f);this.f=null;this.i=sg(em,"suggestedPresentationDelay",ug,this.i);var fm=dm.u,gm=og(this,em,xf);this.u=jg(fm,gm);if(gm=mg(this,em,yf))this.j=kg(fm,gm.url);this.a=og(this,em,qf);};qf.prototype.parse=function(dm,em){this.id=sg(em,"id",zg);this.start=sg(em,"start",ug);this.a=sg(em,"duration",ug);var fm=og(this,em,xf);this.u=jg(dm.u,fm);this.c=mg(this,em,zf);this.f=mg(this,em,cg);this.g=mg(this,em,eg);this.b=og(this,em,rf);ig(this);};function ig(dm){for(var em=[],fm=0;fm<dm.b.length;++fm){var gm=dm.b[fm];null!=gm.group&&(em[gm.group]=true);}for(fm=0;fm<dm.b.length;++fm)if(gm=dm.b[fm],null==gm.group){for(var hm=1;1==em[hm];)++hm;em[hm]=true;gm.group=hm;}}rf.prototype.parse=function(dm,em){var fm=mg(this,em,tf)||{},gm=mg(this,em,sf);this.id=sg(em,"id",zg);this.group=sg(em,"group",yg);this.lang=sg(em,"lang",zg,fm.lang);this.contentType=sg(em,"contentType",zg,fm.contentType);this.width=sg(em,"width",xg);this.height=sg(em,"height",xg);this.b=sg(em,"mimeType",zg);this.i=sg(em,"codecs",zg);this.c=gm&&"main"==gm.value;this.lang&&(this.lang=cc(this.lang));fm=og(this,em,xf);this.u=jg(dm.u,fm);this.j=og(this,em,vf);!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]);this.f=dm.c?lg(this,em,dm.c):mg(this,em,zf);this.g=dm.f?lg(this,em,dm.f):mg(this,em,cg);this.h=dm.g?lg(this,em,dm.g):mg(this,em,eg);this.a=og(this,em,uf);!this.b&&this.a.length&&(this.b=this.a[0].f,!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]));};sf.prototype.parse=function(dm,em){this.value=sg(em,"value",zg);};tf.prototype.parse=function(dm,em){this.id=sg(em,"id",zg);this.lang=sg(em,"lang",zg);this.contentType=sg(em,"contentType",zg);this.lang&&(this.lang=cc(this.lang));};uf.prototype.parse=function(dm,em){this.id=sg(em,"id",zg);this.bandwidth=sg(em,"bandwidth",xg);this.width=sg(em,"width",xg,dm.width);this.height=sg(em,"height",xg,dm.height);this.f=sg(em,"mimeType",zg,dm.b);this.h=sg(em,"codecs",zg,dm.i);this.fbQualityLabel=sg(em,"FBQualityLabel",zg);this.fbQualityClass=sg(em,"FBQualityClass",zg);this.lang=dm.lang;var fm=og(this,em,xf);this.u=jg(dm.u,fm);this.c=og(this,em,vf);this.g=dm.f?lg(this,em,dm.f):mg(this,em,zf);this.b=dm.g?lg(this,em,dm.g):mg(this,em,cg);this.a=dm.h?lg(this,em,dm.h):mg(this,em,eg);this.c=this.c.concat(dm.j);};vf.prototype.parse=function(dm,em){this.f=em;this.c=sg(em,"schemeIdUri",zg);var fm=sg(em,"cenc:default_KID",zg);fm&&(this.b=fm.replace(/[-]/g,""));this.a=mg(this,em,wf);};wf.prototype.parse=function(dm,em){var fm=pg(em);if(fm){this.psshBox=sd(fm);try{this.parsedPssh=new le(this.psshBox);}catch(gm){if(!(gm instanceof RangeError))throw gm;}}};xf.prototype.parse=function(dm,em){this.url=pg(em);};yf.prototype.parse=function(dm,em){this.url=pg(em);};zf.prototype.parse=function(dm,em){this.u=dm.u||this.u;this.h=sg(em,"timescale",xg,this.h);this.g=sg(em,"presentationTimeOffset",yg,this.g);this.a=sg(em,"indexRange",vg,this.a);this.f=sg(em,"FBFirstSegmentRange",vg,this.f);this.b=mg(this,em,ag)||this.b;this.c=mg(this,em,bg)||this.c;};ag.prototype.parse=function(dm,em){var fm=sg(em,"sourceURL",zg);this.url=kg(dm.u,fm);this.a=sg(em,"range",vg,rg(dm.a));};bg.prototype.parse=function(dm,em){var fm=sg(em,"sourceURL",zg);this.url=kg(dm.u,fm);this.a=sg(em,"range",vg);};cg.prototype.parse=function(dm,em){this.u=dm.u||this.u;this.a=sg(em,"timescale",xg,this.a);this.g=sg(em,"presentationTimeOffset",yg,this.g);this.c=sg(em,"duration",xg,this.c);var fm=sg(em,"startNumber",xg);null!=fm&&(this.i=fm);this.h=mg(this,em,bg)||this.h;this.b=(fm=og(this,em,dg))&&0<fm.length?fm:this.b;this.f=mg(this,em,fg)||this.f;};dg.prototype.parse=function(dm,em){var fm=sg(em,"media",zg);this.b=kg(dm.u,fm);this.a=sg(em,"mediaRange",vg);};eg.prototype.parse=function(dm,em){this.a=sg(em,"timescale",xg,this.a);this.i=sg(em,"presentationTimeOffset",yg,this.i);this.b=sg(em,"duration",xg,this.b);var fm=sg(em,"startNumber",yg);null!=fm&&(this.j=fm);this.h=sg(em,"media",zg,this.h);this.f=sg(em,"index",zg,this.f);this.g=sg(em,"initialization",zg,this.g);this.c=mg(this,em,fg)||this.c;};fg.prototype.parse=function(dm,em){this.a=og(this,em,gg);};gg.prototype.parse=function(dm,em){this.b=sg(em,"t",yg);this.a=sg(em,"d",yg);this.c=sg(em,"r",wg);};function jg(dm,em){if(!em||0===em.length)return dm;for(var fm=[],gm=0;gm<em.length;gm++){var hm=em[gm].url;null==dm||0===dm.length?fm.push(new ze(hm)):(hm=kg(dm.slice(0,1),hm),fm.push(hm[0]));}return fm;}function kg(dm,em){if(!em)return dm;var fm=new ze(em);return dm?dm.map(function(gm){return gm.resolve(fm);}):[fm];}function lg(dm,em,fm){var gm=rg(fm);(em=ng(em,fm.constructor.TAG_NAME))&&gm.parse(dm,em);return gm;}function mg(dm,em,fm){var gm=null;if(em=ng(em,fm.TAG_NAME))gm=new fm(),gm.parse(dm,em);return gm;}function ng(dm,em){for(var fm=null,gm=0;gm<dm.childNodes.length;gm++)if(dm.childNodes[gm].tagName==em){if(fm)return null;fm=dm.childNodes[gm];}return fm;}function og(dm,em,fm){for(var gm=[],hm=0;hm<em.childNodes.length;hm++)if(em.childNodes[hm].tagName==fm.TAG_NAME){var im=new fm();im.parse.call(im,dm,em.childNodes[hm]);gm.push(im);}return gm;}function pg(dm){dm=dm.firstChild;return dm.nodeType!=Node.TEXT_NODE?null:dm.nodeValue;}function qg(dm){return dm?dm.map(function(em){return em.clone();}):null;}function rg(dm){return dm?dm.clone():null;}function sg(dm,em,fm,gm){dm=fm(dm.getAttribute(em));return null!=dm?dm:void 0!==gm?gm:null;}function tg(dm){if(!dm)return null;dm=Date.parse(dm);return isNaN(dm)?null:Math.floor(dm/1000);}function ug(dm){if(!dm)return null;var em=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(dm);if(!em)return null;dm=0;var fm=yg(em[1]);fm&&(dm+=31536000*fm);(fm=yg(em[2]))&&(dm+=2592000*fm);(fm=yg(em[3]))&&(dm+=86400*fm);(fm=yg(em[4]))&&(dm+=3600*fm);(fm=yg(em[5]))&&(dm+=60*fm);em=i.parseFloat(em[6]);(em=isNaN(em)?null:em)&&(dm+=em);return dm;}function vg(dm){var em=/([0-9]+)-([0-9]+)/.exec(dm);if(!em)return null;dm=yg(em[1]);if(null==dm)return null;em=yg(em[2]);return null==em?null:new hg(dm,em);}function wg(dm){dm=i.parseInt(dm,10);return isNaN(dm)?null:dm;}function xg(dm){dm=i.parseInt(dm,10);return 0<dm?dm:null;}function yg(dm){dm=i.parseInt(dm,10);return 0<=dm?dm:null;}function zg(dm){return dm;}function ah(dm,em){this.url=dm;this.b=em||new bh();this.g=this.j=this.h=0;this.a=null;this.c=new xc();this.f=null;}l("shaka.util.AjaxRequest",ah);function bh(){this.body=null;this.a=1;this.j=1000;this.c=0;this.method="GET";this.h="arraybuffer";this.b={};this.i=this.m=false;this.g=this.f=this.o=null;this.l=false;}var ch=true;function dh(dm){eh(dm);dm.b.body=null;dm.c.destroy();dm.c=null;dm.f=null;}function eh(dm){dm.a&&(dm.a.onload=null,dm.a.onreadystatechange=null,dm.a.onerror=null,dm.a.ontimeout=null);dm.a=null;}var fh=/(.*)\.(xx|fna)\.fbcdn\.net/;ah.prototype.i=function(){if(this.a)return this.c;if(0==this.url.lastIndexOf("data:",0)){var dm=this.url.split(":")[1].split(";").pop().split(","),em=dm.pop(),em="base64"==dm.pop()?i.atob(em.replace(/-/g,"+").replace(/_/g,"/")):i.decodeURIComponent(em);"arraybuffer"==this.b.h&&(em=rd(em).buffer);dm=JSON.parse(JSON.stringify(new XMLHttpRequest()));dm.response=em;dm.responseText=em.toString();em=this.c;em.resolve(dm);dh(this);return em;}if(0==this.url.lastIndexOf("idb:",0))return this.A();this.h++;this.j=Date.now();this.g||(this.g=this.b.j);this.a=new XMLHttpRequest();var fm=this.url,em=new ze(fm);ch&&(this.f&&!this.f.supportsCaching()||this.b.i)&&nf(em.a,"_",Date.now());fm=fh.test(fm);null!=this.b.g&&fm&&nf(em.a,"_nc_x-fb-dash-push-segments",this.b.g);null!=this.b.f&&fm&&nf(em.a,"_nc_x-fb-dash-latest-segment-start-time",this.b.f);1==this.b.l&&nf(em.a,"_nc_playing",1);fm=em.toString();this.a.open(this.b.method,fm,true);this.a.responseType=this.b.h;this.a.timeout=this.b.c;this.a.withCredentials=this.b.m;this.a.onload=this.l.bind(this);this.a.onreadystatechange=this.m.bind(this);this.a.onerror=this.v.bind(this);this.a.ontimeout=this.o.bind(this);for(dm in this.b.b)this.a.setRequestHeader(dm,this.b.b[dm]);this.a.send(this.b.body);return this.c;};ah.prototype.send=ah.prototype.i;function gh(dm,em,fm){em=Error(em);em.type=fm;em.status=dm.a.status;em.url=dm.url;em.method=dm.b.method;em.body=dm.b.body;em.Pb=dm.a;return em;}ah.prototype.l=function(dm){this.f&&this.f.sample(Date.now()-this.j,dm.loaded);dm=[403];200<=this.a.status&&299>=this.a.status?(this.c.resolve(this.a),dh(this)):this.h<this.b.a&&-1===dm.indexOf(this.a.status)?hh(this):(dm=gh(this,"HTTP error.","net"),this.c.reject(dm),dh(this));};ah.prototype.m=function(){if(this.a.readyState==XMLHttpRequest.HEADERS_RECEIVED&&(this.a.ha=Date.now()-this.j,this.b.i)){var dm=Date.parse(this.a.getResponseHeader("Date"));dm&&(fb=dm-Date.now());}};ah.prototype.v=function(){var dm=gh(this,"Network failure.","net");this.c.reject(dm);dh(this);};ah.prototype.o=function(){if(this.h<this.b.a){hh(this);}else{var dm=gh(this,"Request timed out.","net");this.c.reject(dm);dh(this);}};function hh(dm){eh(dm);i.setTimeout(dm.i.bind(dm),dm.g*(1+.5*(2*Math.random()-1)));dm.g*=2;}function ih(dm,em,fm,gm){this.b=em;this.h=fm||0;this.g=null!=gm?gm:null;this.c=this.a=null;this.j=dm;this.i=null;}var jh;l("shaka.util.FailoverUri",ih);function kh(dm,em){return dm&&0!==dm.length?dm.map(function(fm){return fm.resolve(em);}):[em];}ih.setPrefetchCacheValueGetter=function(dm){jh=dm;};function lh(dm,em,fm){if(dm.a)return dm.a;dm.a=mh(dm,0,em||new bh(),fm);return dm.a;}ih.prototype.f=function(){if(this.c){this.a=null;var dm=this.c;if(dm.a&&dm.a.readyState!=XMLHttpRequest.DONE){dm.a.abort();var em=gh(dm,"Request aborted.","aborted");dm.c.reject(em);dh(dm);}this.i=this.c=null;}};function mh(dm,em,fm,gm){var hm=dm.b[em].toString();if(dm.h||dm.g){var im=dm.b[em].P;!im.endsWith("fbcdn.net")||im.startsWith("interncache")||im.endsWith("ak.fbcdn.net")?fm.b.Range="bytes="+(dm.h+"-"+(null!=dm.g?dm.g:"")):hm+="&bytestart="+dm.h+"&byteend="+dm.g;}dm.j&&(hm=dm.j(hm,fm.b)||hm);im=null;jh&&(im=jh(hm));im||(dm.c=new ah(hm,fm),gm&&(dm.c.f=gm),im=dm.c.i());hm=im.then(dd(dm,function(jm){this.i=this.c=this.a=null;this.i=jm.a?new ze(jm.a):this.b[em];jm.response.ha=jm.ha;return Promise.resolve(jm.response);}));return hm=hm.catch(dd(dm,function(jm){if(this.a&&em+1<this.b.length)return this.a=mh(this,em+1,fm,gm);this.a=this.c=null;return Promise.reject(jm);}));}ih.prototype.clone=function(){return new ih(this.j,this.b.map(function(dm){return dm.clone();}),this.h,this.g);};ih.prototype.toString=function(){return this.b[0].toString();};function nh(dm,em,fm,gm){this.a=new bh();this.a.h="text";this.a.a=3;this.a.c=1000*(null!=em?em:0);this.a.g=null!=fm?fm:null;this.a.f=null!=gm?gm:null;this.a.i=true;this.b=dm;}function oh(dm){var em=dm.b;return lh(em,dm.a).then(function(fm){if(fm=of(fm,em.b,[em.i]))return Promise.resolve(fm);fm=Error("MPD parse failure.");fm.type="dash";return Promise.reject(fm);});}function ph(dm,em,fm,gm){for(var hm=em.a,im=[],jm=0;jm<gm;++jm){var km=jm+fm,lm=(km-1)*hm.b,mm=lm/hm.a,nm=(lm+hm.b)/hm.a,km=qh(dm,em,hm.j+km-1,lm);if(!km)return null;im.push(new uh(mm,nm,km,lm));}return im;}function qh(dm,em,fm,gm){if(!em.a)return null;var hm=em.a.h;if(!hm)return em.u?new ih(dm,em.u,0,null):null;fm=rh(hm,em.id,fm,em.bandwidth,gm);if(!fm)return null;em=kh(em.u,fm);return new ih(dm,em,0,null);}function rh(dm,em,fm,gm,hm){var im={RepresentationID:em,Number:fm,Bandwidth:gm,Time:hm};dm=dm.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(km,lm,mm){if("$$"==km)return "$";var nm=im[lm];if(null==nm)return km;"RepresentationID"==lm&&mm&&(mm=void 0);km=nm.toString();mm=i.parseInt(mm,10)||1;mm=Math.max(0,mm-km.length);return Array(mm+1).join("0")+km;});try{return new ze(dm);}catch(jm){if(jm instanceof URIError)return null;throw jm;}}function sh(dm,em,fm){var gm=0;em*=fm;dm=dm.a;fm=[];for(var hm=0;hm<dm.length&&dm[hm].a;++hm){var im=dm[hm].b,im=null!=im?im:gm,jm=dm[hm].c||0;0>jm&&(jm=dm[hm].a,jm=hm+1===dm.length?Math.ceil((dm[0].b+em-im)/jm)-1:Math.ceil((dm[hm+1].b-im)/jm)-1);0<fm.length&&im!=gm&&(fm[fm.length-1].end=im);for(var km=0;km<=jm;++km)gm=im+dm[hm].a,fm.push({start:im,end:gm}),im=gm;}return fm;}function th(dm,em){this.a=dm;this.b=em||null;}th.prototype.destroy=function(){this.a&&(this.a.f(),this.a=null);this.b=null;};th.prototype.create=function(){return this.a?lh(this.a):Promise.resolve(this.b);};function uh(dm,em,fm,gm){this.b=dm;this.a=em;this.url=fm;this.c=null!=gm?gm:null;}function vh(dm,em,fm){return new uh(em,fm,dm.url,null!=dm.c?dm.c:void 0);}function wh(dm,em){for(var fm=dm.length-1;0<=fm;--fm){var gm=dm[fm];if(em>=gm.b&&(null==gm.a||em<gm.a))return fm;}return -1;}function xh(dm,em){return dm.map(function(fm){return vh(fm,fm.b+em,null!=fm.a?fm.a+em:null);});}function yh(){}yh.prototype.parse=function(dm,em,fm,gm,hm){var im=null;try{dm:{var km=[],lm=new gb(dm),mm=kb(lm);if(1936286840!=kb(lm)){im=null;}else{1==mm&&(mm=lb(lm));var nm=jb(lm);nb(lm,3);nb(lm,4);var om=kb(lm);if(0==om){im=null;}else{var pm,qm;0==nm?(pm=kb(lm),qm=kb(lm)):(pm=lb(lm),qm=lb(lm));nb(lm,2);var rm=lm.b.getUint16(lm.a,lm.c);lm.a+=2;dm=pm;em=em+mm+qm;for(qm=mm=0;qm<rm;qm++){var sm=kb(lm);pm=(sm&2147483648)>>>31;var nm=sm&2147483647,tm=kb(lm);kb(lm);if(1==pm){im=null;break dm;}var um;um=0==qm&&hm?hm:new ih(gm,fm,em,em+nm-1);pm=dm/om;var vm=(dm+tm)/om;0===qm&&(mm=pm);km.push(new uh(pm-mm,vm-mm,um));dm+=tm;em+=nm;}im=km;}}};}catch(jm){if(!(jm instanceof RangeError))throw jm;}return im;};function zh(dm){this.a=dm;this.W=0;this.j=[];this.Ka=false;}zh.prototype.D=function(){return Math.floor((this.j.length-1-this.j.lastIndexOf(true))/2);};zh.prototype.getConsecutiveUpdatesWithoutChanges=zh.prototype.D;zh.prototype.B=function(){return this.j.length-1-this.j.lastIndexOf(false);};zh.prototype.getConsecutiveUpdatesWithChanges=zh.prototype.B;zh.prototype.destroy=function(){this.a=null;};j=zh.prototype;j.length=function(){return this.a.length;};function ai(dm){if(0==dm.a.length)throw new RangeError("SegmentIndex: There is no first SegmentReference.");return dm.a[0];}j.w=function(){if(0==this.a.length)throw new RangeError("SegmentIndex: There is no last SegmentReference.");return this.a[this.a.length-1];};j.get=function(dm){if(0>dm||dm>=this.a.length)throw new RangeError("SegmentIndex: The specified index is out of range.");return this.a[dm];};j.ja=function(dm){dm=wh(this.a,dm);return 0<=dm?this.a[dm]:null;};j.Da=function(dm){bi(this,dm);return true;};function bi(dm,em){dm.W!=em.W&&(em=new zh(xh(em.a,dm.W-em.W)));if(0==dm.length()){dm.a=em.a.slice(0);}else if(0!=em.length()&&null!=dm.w().a)if(null!=em.w().a&&em.w().a<dm.w().a){dm.Ka=true;}else{dm.Ka=false;if(dm.w().a<=ai(em).b){var fm=vh(dm.w(),dm.w().b,ai(em).b),fm=dm.a.slice(0,-1).concat([fm]);}else{var gm;for(gm=0;gm<dm.a.length&&!(dm.a[gm].a>=ai(em).b);++gm);dm.a[gm].b<ai(em).b?(fm=vh(dm.a[gm],dm.a[gm].b,ai(em).b),fm=dm.a.slice(0,gm).concat([fm])):(ai(dm).b>ai(em).b||ai(em),fm=dm.a.slice(0,gm));}dm.a=fm.concat(em.a);}}j.ia=function(dm){var em=dm-this.W;if(0==em)return 0;this.a=xh(this.a,em);this.W=dm;return em;};j.za=function(){return 0<this.length()?{start:ai(this).b,end:this.w().a}:{start:0,end:0};};function ci(dm,em,fm,gm){zh.call(this,dm);this.h=em;this.A=fm;this.g=gm;this.i=this.h.b||this.h.a.reduce(function(hm,im){return null==im.a?NaN:hm+im.a;},0)||0;this.b=this.o=this.f=null;di(this);}m(ci,zh);ci.prototype.destroy=function(){this.A=this.h=null;zh.prototype.destroy.call(this);};ci.prototype.ja=function(dm){fi(this,eb()/1000);return zh.prototype.ja.call(this,dm);};ci.prototype.Da=function(dm){if(!(dm instanceof ci))return false;bi(this,dm);this.i=Math.max(this.i,dm.i);null==this.f?(this.g=dm.g,di(this)):gi(this);return true;};function di(dm){gi(dm);if(0!=dm.length()){dm.length();var em=null!=dm.w().a?dm.w().a:dm.w().b;if(dm.h.c>dm.g){dm.f=em;}else{var fm=dm.g-(dm.h.c+dm.A.start);0>fm?dm.f=em:fm<Math.max(dm.w().b,dm.w().a||0)?(dm.w(),dm.f=em):dm.f=fm;}dm.o=dm.w().b;dm.b=ai(dm).b;}}ci.prototype.ia=function(dm){dm=zh.prototype.ia.call(this,dm);Math.min.apply(null,this.a.filter(function(em){return null!=em.a;}).map(function(em){return em.a-em.b;}));null!=this.f&&(this.o+=dm,this.b+=dm,this.f+=dm);return dm;};ci.prototype.za=function(){return ei(this,eb()/1000);};function ei(dm,em){fi(dm,em);if(null==dm.f||null==dm.o||null==dm.b)return {start:0,end:0};var fm=Number.POSITIVE_INFINITY;dm.i&&(fm=dm.i);var gm=em-dm.g,hm=dm.f+gm;null!=dm.h.f&&(hm=hm-dm.b-dm.h.f,0<hm&&(dm.b+=hm));dm.b=Math.min(dm.b,fm);gm=dm.o+gm;if(gm<dm.b)return {start:dm.b,end:dm.b};gm=0<dm.length()?null!=dm.w().a?Math.min(gm,dm.w().a):gm:dm.b;gm=Math.max(gm,dm.b);gm=Math.min(gm,fm);return {start:dm.b,end:gm};}function fi(dm,em){gi(dm);if(null!=dm.h.f)if(null==dm.f){dm.length();}else{for(var fm=dm.f+(em-dm.g),gm=0,hm=0;hm<dm.a.length;++hm){var im=null;hm<dm.a.length-1?im=dm.a[hm+1].a:(im=dm.a[hm],im=null!=im.a?im.a+(im.a-im.b):null);if(null!=im&&im<fm-dm.h.f){++gm;}else break;}0<gm&&dm.a.splice(0,gm);}}function gi(dm){if(dm.i){for(var em=0,fm=dm.a.length-1;0<=fm;--fm)if(dm.a[fm].b>dm.i){++em;}else break;0<em&&dm.a.splice(-em);}}function hi(dm,em,fm,gm,hm){var im=1,jm=0,km;if(dm.c>gm){km=null;}else{var lm=dm.i||0,mm=dm.f||0;km=fm.a;km=km.b/km.a;var nm=gm-(dm.c+em.start);0>nm?km=null:(mm=nm-2*km-mm,0>mm&&(mm=0),mm=Math.ceil(mm/km)*km,nm-=km,0>nm?km=null:(lm=Math.floor(nm/km)*km-lm,0>lm&&(lm=0),lm=Math.floor(lm/km)*km,km={Xa:mm/km+1,current:(lm>=mm?lm:mm)/km+1}));}km&&(im=km.Xa,jm=km.current-km.Xa+1);im=ph(hm,fm,im,jm);if(null==im)throw dm=Error("Failed to generate SegmentReferences."),dm.type="stream",dm;ci.call(this,im,dm,em,gm);this.v=fm;this.m=this.c=0<this.length()?dm.c+em.start+this.w().a:null;this.l=km?km.current+1:null;this.S=hm;}m(hi,ci);hi.prototype.destroy=function(){this.S=this.v=null;ci.prototype.destroy.call(this);};hi.prototype.ja=function(dm){var em=eb()/1000;ii(this,em);fi(this,em);return zh.prototype.ja.call(this,dm);};hi.prototype.Da=function(dm){if(null!=this.c||!(dm instanceof hi)||null==dm.c)return false;this.c=dm.c;this.m=dm.m;this.l=dm.l;this.g=dm.g;this.i=dm.i;bi(this,dm);ii(this,eb()/1000);di(this);return true;};hi.prototype.ia=function(dm){dm=ci.prototype.ia.call(this,dm);null!=this.c&&(this.c+=dm,this.m+=dm);return dm;};hi.prototype.za=function(){var dm=eb()/1000;ii(this,dm);return ei(this,dm);};function ii(dm,em){if(null!=dm.c&&null!=dm.m&&null!=dm.l){var fm=dm.v.a,fm=fm.b/fm.a,gm=Math.floor((dm.m+(em-dm.g)-dm.c)/fm);if(0!=gm){var hm=ph(dm.S,dm.v,dm.l,gm);Array.prototype.push.apply(dm.a,xh(hm,dm.W));dm.c+=gm*fm;dm.l+=gm;}}}function ji(dm,em,fm,gm,hm){this.f=dm;this.b=em;this.c=fm;this.h=gm;this.a=null;this.g=hm;}ji.prototype.destroy=function(){this.g=this.c=this.b=this.f=null;this.a&&(this.a.destroy(),this.a=null);};ji.prototype.create=function(){if(this.a)return Promise.resolve(this.a);if("dynamic"==this.f.type){try{this.a=new hi(this.f,this.b,this.c,this.h,this.g);}catch(dm){return Promise.reject(dm);}}else{var em;em=this.c.a;if(em=ph(this.g,this.c,1,Math.ceil(this.b.a/(em.b/em.a)))){if(0<em.length){var fm=em[em.length-1];em[em.length-1]=vh(fm,fm.b,this.b.a);}em=new zh(em);}else em=null;this.a=em;if(!this.a)return em=Error("Failed to generate SegmentReferences"),em.type="stream",Promise.reject(em);}return Promise.resolve(this.a);};function ki(dm,em,fm,gm,hm){this.c=dm;this.b=em;this.g=fm;this.a=null;this.h=gm;this.f=hm;}ki.prototype.destroy=function(){this.f=this.g=this.b=this.c=null;this.a&&(this.a.destroy(),this.a=null);};ki.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var dm=this.g.b,em=[];dm.f&&(em=sh(dm.f,dm.a||1,this.b.a||0));var fm=0;dm.c&&dm.i?fm=(dm.i-1)*dm.c:0<em.length&&(fm=em[0].start-(dm.g||0));var gm=fm,hm=dm.b.length;0<em.length&&em.length!=dm.b.length&&(hm=Math.min(em.length,dm.b.length));for(var im=[],jm=0;jm<hm;++jm){var km=dm.b[jm],lm=fm/dm.a,mm=null,nm=null;dm.c?(mm=fm+dm.c,nm=mm/dm.a):0<em.length?(mm=em[jm].end-(dm.g||0),nm=mm/dm.a):(nm=lm+this.b.a,mm=nm*dm.a);var fm=mm,mm=0,om=null;km.a&&(mm=km.a.fa,om=km.a.end);nm=Math.min(this.b.a+gm/dm.a,nm);im.push(new uh(lm,nm,new ih(this.f,km.b,mm,om)));}"dynamic"==this.c.type?this.a=new ci(im,this.c,this.b,this.h):this.a=new zh(im);return Promise.resolve(this.a);};function li(dm,em,fm,gm,hm){this.b=dm;this.c=em;this.f=fm;this.h=gm;this.a=null;this.g=hm;}li.prototype.destroy=function(){this.g=this.f=this.c=this.b=null;this.a&&(this.a.destroy(),this.a=null);};li.prototype.create=function(){if(this.a)return Promise.resolve(this.a);for(var dm=this.f.a,em=sh(dm.c,dm.a||1,this.c.a||0),fm=[],gm=0;gm<em.length;++gm){var hm=em[gm].start,im=hm/dm.a,jm=em[gm].end/dm.a,km=qh(this.g,this.f,gm+dm.j,hm);if(!km)return dm=Error("Failed to generate media URL."),dm.type="dash",Promise.reject(dm);var lm=(dm.i||0)/dm.a;fm.push(new uh(im-lm,jm-lm,km,hm));}"dynamic"==this.b.type?this.a=new ci(fm,this.b,this.c,this.h):this.a=new zh(fm);return Promise.resolve(this.a);};function mi(){this.C=ni++;this.id=this.K=this.J=null;this.b=0;this.height=this.width=this.bandwidth=null;this.c=this.a="";this.switchReason=this.fbQualityClass=this.fbQualityLabel=null;this.f=[];this.O=false;this.H=true;}var ni=0;mi.prototype.destroy=function(){this.J&&(this.J.destroy(),this.J=null);this.K&&(this.K.destroy(),this.K=null);};function oi(dm){var em=dm.a||"";dm.c&&(em+='; codecs="'+dm.c+'"');return em;}function pi(){this.C=qi++;this.id=null;this.contentType=this.lang="";this.b=false;this.s=[];this.a=[];}var qi=0;pi.prototype.destroy=function(){for(var dm=0;dm<this.s.length;++dm)this.s[dm].destroy();this.a=this.s=null;};function ri(dm){for(var em=[],fm=0;fm<dm.a.length;++fm){var gm=new ui();gm.id=dm.C;gm.a=dm.a[fm];gm.contentType=dm.contentType;gm.b=dm.s.length?oi(dm.s[0]):"";em.push(gm);}return em;}function si(){this.id=null;this.start=0;this.b=null;this.a=[];}si.prototype.destroy=function(){for(var dm=0;dm<this.a.length;++dm)this.a[dm].destroy();this.a=null;};function ti(){this.b=false;this.i=this.g=this.f=null;this.c=0;this.a=[];this.h=false;}ti.prototype.destroy=function(){for(var dm=0;dm<this.a.length;++dm)this.a[dm].destroy();this.a=null;};function ui(){this.id=0;this.a=null;this.b=this.contentType="";}function vi(dm,em,fm,gm,hm,im){sc.call(this,dm);this.b=em;this.a=new ed(fm,gm,hm);this.N=0;this.A=this.F=this.c=null;this.G=false;this.g=this.v=null;this.m=false;this.j=null;this.i=false;this.h=new xc();this.l=this.f=false;this.o=0;this.L=15;this.U=this.I=false;this.T=im;this.B=this.M=false;}m(vi,sc);vi.prototype.D=function(dm){null!=dm.initialStreamBufferSize&&(this.o=Number(dm.initialStreamBufferSize));null!=dm.streamBufferSize&&(this.L=Number(dm.streamBufferSize));null!=dm.addCdnDebugQueryParameters&&(this.I=Boolean(dm.addCdnDebugQueryParameters));null!=dm.useInitialBufferSizeWhenPaused&&(this.U=Boolean(dm.useInitialBufferSizeWhenPaused));null!=dm.segmentRequestTimeout&&(this.a.m=Number(dm.segmentRequestTimeout));null!=dm.resolveVideoTimeUpdateOnFragmentedTimeRanges&&(this.M=Boolean(dm.resolveVideoTimeUpdateOnFragmentedTimeRanges));};vi.prototype.destroy=function(){dj(this);this.h.destroy();this.c=this.h=null;this.a.destroy();this.S=this.b=this.a=null;};j=vi.prototype;j.pa=function(){return this.c;};j.Aa=function(){return this.F;};j.jb=function(dm){this.f||dm.then(function(){this.f=true;this.g||cj(this,0);}.bind(this)).catch(function(){});return this.h;};j.Ca=function(){return this.l;};j.qa=function(dm,em,fm,gm){dm!=this.c&&(this.A=dm.K.create(),dm.J.create().then(dd(this,function(hm){if(this.b){var im=this.c;this.c=dm;this.F=hm;this.G=true;this.v=gm?gm:null;this.m||(im?em&&wi(this,true,fm):cj(this,0));}})).catch(dd(this,function(hm){"aborted"!=hm.type&&(this.f?(hm=yb(hm),this.dispatchEvent(hm)):this.h.reject(hm));})));};j.gb=function(){return wi(this,false);};function wi(dm,em,fm){dm.c&&!dm.m&&(dm.m=true,dj(dm),ld(dm.a).then(dd(dm,function(){var gm=this.b.currentTime;if(!em&&0<gd(this.a,gm)&&0<=wh(this.a.b,gm))return Promise.resolve();if(fm)return kd(this.a,this.b.currentTime+fm);this.B=true;return jd(this.a);})).then(dd(dm,function(){this.m=false;cj(this,0);})).catch(dd(dm,function(gm){this.m=false;this.f?(gm=yb(gm),this.dispatchEvent(gm)):this.h.reject(gm);})));}j.hb=function(dm){return 0<gd(this.a,dm)&&0<=wh(this.a.b,dm);};j.ta=function(){};j.xa=function(){return true;};function xi(dm){var em=dm.U&&dm.b.paused?dm.o:dm.L;return dm.i?Math.max(dm.o,em):dm.o;}j.Db=function(){if(this.i&&!this.f){this.g=null;}else{var dm;if(dm=this.f&&!this.l)dm=1<this.a.c.buffered.length?true:false;if(dm){this.M&&(this.b.currentTime=md(this.a,this.b.currentTime)),wi(this,true);}else{this.g=null;dm=this.c;var em=this.F,fm=this.b.currentTime;if(gd(this.a,this.i?fm:fm+(this.j||0))>=xi(this)){zi(this),cj(this,1000/(5*(Math.abs(this.b.playbackRate)||1)));}else{var gm=yi(this,fm,em);gm?(em=id(this.a,gm,dm.b,this.A,this.I&&!this.b.paused),this.T&&"video"===dm.a.split("/")[0]&&this.T(gm.b,gm.a,{id:dm.id,reason:this.v}),this.A=null,this.G&&(this.G=false,gm=this.v,this.v=null,aj(this,dm,gm)),this.l=false,em.then(dd(this,function(hm){var im=hm.W;hm=hm.nb;this.i||(this.N=hm);null==this.j&&(this.j=im);this.B&&0<gd(this.a,fm)&&(this.B=false,this.b.currentTime+=.001);cj(this,0);})).catch(dd(this,function(hm){if("aborted"!=hm.type){var im=[0,404,410,502,503,504];"net"==hm.type&&-1!=im.indexOf(hm.Pb.status)&&this.c&&cj(this,1000);hm=yb(hm);this.dispatchEvent(hm);}}))):(zi(this),this.f&&!this.l&&(this.l=true,bj(this)),cj(this,200));}}}};function yi(dm,em,fm){dm=dm.a;var gm=dm.b.length;dm=0<gm?dm.b[gm-1]:null;return null!=dm?null!=dm.a?fm.ja(dm.a):null:fm.ja(em)||(fm.length()?fm.w():null);}function zi(dm){if(!dm.i&&null!=dm.j){dm.i=true;var em=dm.a,fm=dm.j,gm=fm-em.o;0!=gm&&(em.b=xh(em.b,gm),em.o=fm);dm.h.resolve(dm.j);}}function aj(dm,em,fm){var gm=em.a.split("/")[0];em=xb({type:"adaptation",bubbles:true,contentType:gm,size:"video"!=gm?null:{width:em.width,height:em.height},bandwidth:em.bandwidth,reason:fm});dm.dispatchEvent(em);}function bj(dm){var em=xb({type:"ended"});dm.dispatchEvent(em);}function cj(dm,em){dm.g=i.setTimeout(dm.Db.bind(dm),em);}function dj(dm){null!=dm.g&&(i.clearTimeout(dm.g),dm.g=null);}j.ya=function(){return this.N;};function ej(dm){this.b=dm;this.a=null;}ej.prototype.destroy=function(){this.a&&(this.a.destroy(),this.a=null);};ej.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var dm=new uh(0,null,this.b);this.a=new zh([dm]);return Promise.resolve(this.a);};function fj(dm,em){sc.call(this,dm);this.b=em;this.g=true;this.h=this.f=null;this.c=new xc();this.a=null;}m(fj,sc);fj.prototype.D=function(){};fj.prototype.destroy=function(){this.a&&this.b.removeChild(this.a);this.c.destroy();this.S=this.b=this.f=this.h=this.a=this.c=null;};j=fj.prototype;j.pa=function(){return this.f;};j.Aa=function(){return this.h;};j.jb=function(){return this.c;};j.Ca=function(){return true;};j.qa=function(dm){dm.J.create().then(dd(this,function(em){if(this.b){if(0==em.length())return Promise.reject(Error("No subtitles URL available."));var fm=this.f;this.f=dm;this.h=em;em=ai(em).url.b[0].toString();var gm=this.xa();this.a&&(this.ta(false),this.b.removeChild(this.a));this.a=document.createElement("track");this.b.appendChild(this.a);this.a.src=em;this.ta(gm);em=xb({type:"adaptation",bubbles:true,contentType:"text",size:null,bandwidth:dm.bandwidth});this.dispatchEvent(em);fm||this.c.resolve(0);}}));};j.gb=function(){};j.hb=function(){return true;};j.ta=function(dm){this.g=dm;this.a&&(this.a.track.mode=dm?"showing":"disabled");};j.xa=function(){this.a&&(this.g="showing"==this.a.track.mode);return this.g;};function gj(){}gj.prototype.parse=function(dm,em,fm,gm){var hm=null;try{var jm,km=new ob(em);if(440786851!=qb(km).id){jm=null;}else{var lm=qb(km);if(408125543!=lm.id){jm=null;}else{var mm=lm.a.byteOffset,nm,om=new ob(lm.a);for(em=null;ib(om.a);){var pm=qb(om);if(357149030==pm.id){em=pm;break;}}if(em){for(var qm=new ob(em.a),om=1e+06;ib(qm.a);){var rm=qb(qm);if(2807729==rm.id){om=tb(rm);break;}}nm=om/1e+09;}else nm=null;jm=nm?{Jb:mm,Nb:nm}:null;}}if(jm){var sm=qb(new ob(dm));if(475249515!=sm.id){hm=null;}else{var tm=jm.Jb,um=jm.Nb;dm=[];var vm=new ob(sm.a);for(jm=sm=-1;ib(vm.a);){var wm=qb(vm);if(187==wm.id){var xm,ym=new ob(wm.a),zm=qb(ym);if(179!=zm.id){xm=null;}else{var an=tb(zm),bn=qb(ym);if(183!=bn.id){xm=null;}else{for(var cn=new ob(bn.a),mm=0;ib(cn.a);){var dn=qb(cn);if(241==dn.id){mm=tb(dn);break;}}xm={Ob:an,Ib:mm};}}if(xm){var en=um*xm.Ob,fn=tm+xm.Ib;if(0<=sm){var gn=new ih(gm,fm,jm,fn-1);dm.push(new uh(sm,en,gn));}sm=en;jm=fn;}}}0<=sm&&(gn=new ih(gm,fm,jm,null),dm.push(new uh(sm,null,gn)));hm=dm;}}else hm=null;}catch(im){if(!(im instanceof RangeError))throw im;}return hm;};function hj(dm,em,fm,gm,hm,im,jm,km){this.h=dm;this.j=em;this.f=fm;this.a=gm;this.g=hm;this.b=im;this.l=jm;this.c=null;this.i=km;}hj.prototype.destroy=function(){this.i=this.j=this.h=null;this.a.f();this.a=null;this.b&&(this.b.f(),this.b=null);this.g&&(this.g.f(),this.g=null);this.c=null;};hj.prototype.create=function(){if("webm"==this.f){var dm=Error("WebM is not supported in this build configuration.");dm.type="app";return Promise.reject(dm);}if(this.c)return this.c;dm=[lh(this.a)];"webm"==this.f&&dm.push(lh(this.g));this.b&&lh(this.b);return this.c=Promise.all(dm).then(dd(this,function(em){var fm=em[0];em=em[1]||null;var gm=null;"mp4"==this.f?(gm=new yh(),gm=gm.parse(new DataView(fm),this.a.h,this.a.b,this.i,this.b)):"webm"==this.f&&(gm=new gj(),gm=gm.parse(new DataView(fm),new DataView(em),this.a.b,this.i));if(!gm)return fm=Error("Failed to parse SegmentReferences from "+this.a.toString()+" (or one of its fallbacks)."),fm.type="stream",Promise.reject(fm);var hm;"dynamic"==this.h.type?hm=new ci(gm,this.h,this.j,this.l):hm=new zh(gm);return Promise.resolve(hm);}));};function ij(dm){this.a=dm;}function jj(dm,em,fm){for(var gm=eb()/1000,hm=0;hm<em.a.length;++hm)for(var im=em.a[hm],jm=0;jm<im.b.length;++jm){var km=im.b[jm];if("text"!=km.contentType)for(var lm=0;lm<km.a.length;++lm){var mm=km.a[lm],nm=0,nm=nm+(mm.g?1:0),nm=nm+(mm.b?1:0),nm=nm+(mm.a?1:0);0==nm?(km.a.splice(lm,1),--lm):1!=nm&&(mm.g?(mm.b=null,mm.a=null):mm.b&&(mm.a=null));}}kj(em);for(hm=0;hm<em.a.length;++hm)for(im=em.a[hm],jm=0;jm<im.b.length;++jm){lm=km=im.b[jm];mm=null;for(nm=0;nm<lm.a.length;++nm){var om=lm.a[nm].f||"";mm?om!=mm&&(lm.a.splice(nm,1),--nm):mm=om;}0==km.a.length&&(im.b.splice(jm,1),--jm);}"dynamic"==em.type&&null==em.c&&(em.c=gm);hm=new ti();"dynamic"==em.type&&(hm.b=true,hm.f=em.g,hm.g=new ih(fm,em.j||em.url),hm.i=em.c);hm.c=em.h||5;for(im=0;im<em.a.length;++im){jm=em.a[im];if(null==jm.start)break;jm=lj(dm,em,jm,gm,fm);hm.a.push(jm);}return hm;}function kj(dm){if(dm.a.length){null==dm.a[0].start&&(dm.a[0].start=0);var em=function(lm){return 0==lm||!!lm;};"dynamic"==dm.type&&(dm.b=null);em(dm.b)&&1==dm.a.length&&!em(dm.a[0].a)&&(dm.a[0].a=dm.b);for(var fm=0,gm=true,hm=0;hm<dm.a.length;++hm){var im=dm.a[hm-1],jm=dm.a[hm],km=dm.a[hm+1]||{start:dm.b};!em(jm.start)&&im&&em(im.start)&&em(im.a)&&(jm.start=im.start+im.a);!em(jm.a)&&em(km.start)&&(jm.a=km.start-jm.start);null!=jm.start&&null!=jm.a?fm+=jm.a:gm=false;}em(dm.b)||(hm=dm.a[dm.a.length-1],gm?dm.b=fm:em(hm.start)&&em(hm.a)?dm.b=hm.start+hm.a:"dynamic"!=dm.type&&(dm.b=fm));}}function lj(dm,em,fm,gm,hm){var im=new si();im.id=fm.id;im.start=fm.start;im.b=fm.a;var jm=new kc();fm.b.forEach(function(tm){jm.push(tm.contentType||"",tm);});for(var km=nc(jm),lm=0;lm<km.length;++lm){var mm=new kc();jm.get(km[lm]).forEach(function(tm){mm.push(tm.group,tm);});for(var nm=nc(mm),om=0;om<nm.length;++om){var pm=new kc();mm.get(nm[om]).forEach(function(tm){pm.push(tm.lang,tm);});for(var qm=nc(pm),rm=0;rm<qm.length;++rm){var sm=pm.get(qm[rm]),sm=mj(dm,em,fm,sm,gm,hm);im.a.push(sm);}}}return im;}function mj(dm,em,fm,gm,hm,im){n(gm.every(function(rm){return rm.group==gm[0].group&&(rm.lang||"")==(gm[0].lang||"")&&(rm.contentType||"")==(gm[0].contentType||"");}));var jm=new pi(),km=gm.filter(function(rm){return null!=rm.id;});km.length==gm.length&&(jm.id=km.map(function(rm){return rm.id;}).sort().reduce(function(rm,sm){return rm+","+sm;}));jm.lang=gm[0].lang||"";jm.contentType=gm[0].contentType||"";jm.b=gm.some(function(rm){return rm.c;});for(var km={},lm=0;lm<gm.length;++lm)for(var mm=gm[lm],nm=0;nm<mm.a.length;++nm){var om=mm.a[nm],pm=pj(dm,om),qm=jm.a.slice(0);oj(pm,qm);0==qm.length&&0<jm.a.length||!(om=rj(em,fm,om,hm,im))||(jm.s.push(om),jm.a=qm,km[om.C]=mm);}if(jm.a.some(function(rm){return ""==rm.a;}))return jm.s.forEach(function(rm){rm.O=true;}),jm;dm=nj(gm);for(lm=0;lm<jm.s.length;++lm)om=jm.s[lm],mm=km[om.C],mm==dm&&(om.O=true);return jm;}function nj(dm){for(var em=null,fm=null,gm=0;gm<dm.length;++gm)for(var hm=dm[gm],im=0;im<hm.a.length;++im){var jm=hm.a[im],jm=(jm.width||1)*(jm.height||1)*(jm.bandwidth||1);if(null==em||jm<em)em=jm,fm=hm;}return fm;}function oj(dm,em){if(0==em.length){Array.prototype.push.apply(em,dm);}else for(var fm=0;fm<em.length;++fm){for(var gm=false,hm=0;hm<dm.length;++hm){var im=em[fm],jm=dm[hm];if(im.a==jm.a&&im.h==jm.h&&im.l==jm.l&&im.g==jm.g&&im.i==jm.i&&im.f==jm.f&&im.j==jm.j&&ud(im.c,jm.c)){gm=true;xd(em[fm],dm[hm].b);break;}}gm||(em.splice(fm,1),--fm);}}function pj(dm,em){var fm=[];if(0==em.c.length){fm.push(new vd());}else if(dm.a)for(var gm=0;gm<em.c.length;++gm)fm.push.apply(fm,qj(dm,em.c[gm]));return fm;}function qj(dm,em){var fm=[];if(2!=dm.a.length)return [];var gm=dm.a(em.c||"",em.f);if(!(gm&&gm instanceof Array))return [];for(var hm=0;hm<gm.length;++hm){var im,jm=gm[hm];im=new vd();if(jm){var km=hc(jm,"keySystem");if(null!=km){im.a=km;}else throw Error("'keySystem' cannot be null.");var lm=hc(jm,"licenseServerUrl");if(null!=lm){im.h=lm;}else if(km)throw Error("For encrypted streaming content, 'licenseServerUrl' cannot be null or empty.");km=fc(jm,"withCredentials");null!=km&&(im.l=km);km=jc(jm,"licensePostProcessor",Function);null!=km&&(im.m=km);km=jc(jm,"licensePreProcessor",Function);null!=km&&(im.o=km);km=fc(jm,"distinctiveIdentifierRequired");null!=km&&(im.g=km);km=fc(jm,"persistentStateRequired");null!=km&&(im.i=km);km=hc(jm,"audioRobustness");null!=km&&(im.f=km);km=hc(jm,"videoRobustness");null!=km&&(im.j=km);km=jc(jm,"serverCertificate",Uint8Array);null!=km&&(im.c=km);if(km=jc(jm,"initData",Object)){jm=jc(km,"initData",Uint8Array);if(null==jm)throw Error("'initData.initData' cannot be null.");km=hc(km,"initDataType");if(null==km)throw Error("'initData.initDataType' cannot be null.");im.b.push({initData:new Uint8Array(jm.buffer),initDataType:km});}}0==im.b.length&&em.a&&em.a.psshBox&&xd(im,[{initData:em.a.psshBox,initDataType:"cenc"}]);fm.push(im);}return fm;}function rj(dm,em,fm,gm,hm){if(!fm.u||0===fm.u.length)return null;var im=null,jm=1,km=0;if(fm.g){im=fm.f.split("/")[1];if("mp4"!=im&&"webm"!=im){im=null;}else{var lm=fm.g;"webm"!=im||lm.c?lm.a||lm.b&&lm.b.a?(jm=lm.b,jm||(jm=new ag(),jm.url=fm.u,jm.a=lm.a?lm.a.clone():null),km=tj(jm,hm),jm=lm.c?tj(lm.c,hm):null,lm.f?(lm=lm.f,lm=new ih(hm,fm.u,lm.fa,lm.end)):lm=null,dm=new hj(dm,em,im,km,jm,lm,gm,hm),em=new th(jm),gm=new mi(),gm.J=dm,gm.K=em,im=gm):im=null:im=null;}jm=fm.g.h;km=fm.g.g;}else if(fm.b){im=fm.b,!im.c&&!im.f&&1<im.b.length?im=null:im.c||em.a||im.f||1!=im.b.length?im.f&&0===im.f.a.length?im=null:(im=im.h?tj(im.h,hm):null,dm=new ki(dm,em,fm,gm,hm),em=new th(im),gm=new mi(),gm.J=dm,gm.K=em,im=gm):im=null,jm=fm.b.a,km=fm.b.g;}else if(fm.a){dm:if(im=fm.a,jm=0+(im.f?1:0),jm+=im.c?1:0,jm+=im.b?1:0,0==jm?jm=false:(1!=jm&&(im.f?(im.c=null,im.b=null):im.c&&(im.b=null)),jm=true),jm){jm=null;if(im.g&&(jm=(im=fm.a.g)?sj(fm,im,bg):null,!jm)){im=null;break dm;}im=jm?tj(jm,hm):null;jm=fm.a;jm.f?(jm=fm.f.split("/")[1],"mp4"!=jm&&"webm"!=jm?dm=null:"webm"!=jm||im?qh(hm,fm,1,0)?(km=(km=fm.a.f)?sj(fm,km,ag):null)?(km=tj(km,hm),dm=new hj(dm,em,jm,km,im,null,gm,hm)):dm=null:dm=null:dm=null):dm=jm.h?jm.c?new li(dm,em,fm,gm,hm):jm.b?"dynamic"!=dm.type&&null==em.a?null:new ji(dm,em,fm,gm,hm):null:null;dm?(em=new th(im),gm=new mi(),gm.J=dm,gm.K=em,im=gm):im=null;}else im=null;;jm=fm.a.a;km=fm.a.i;}else "text"==fm.f.split("/")[0]&&(im=new mi(),im.J=new ej(new ih(hm,fm.u)));if(!im)return null;im.id=fm.id;km&&(im.b=-1*km/jm);im.bandwidth=fm.bandwidth;im.width=fm.width;im.height=fm.height;im.a=fm.f||"";im.c=fm.h||"";im.fbQualityLabel=fm.fbQualityLabel||null;im.fbQualityClass=fm.fbQualityClass||null;for(dm=0;dm<fm.c.length;++dm)em=fm.c[dm],em.b&&im.f.push(em.b);return im;}function sj(dm,em,fm){em=rh(em,dm.id,null,dm.bandwidth,null);if(!em)return null;fm=new fm();fm.url=kh(dm.u,em);return fm;}function tj(dm,em){var fm=dm.url,gm=0,hm=null;dm.a&&(gm=dm.a.fa,hm=dm.a.end);return new ih(em,fm,gm,hm);}function uj(){this.streamStats=null;this.droppedFrames=this.decodedFrames=NaN;this.bufferingTime=this.playTime=this.estimatedBandwidth=0;this.playbackLatency=NaN;this.bufferingHistory=[];this.bandwidthHistory=[];this.streamHistory=[];}function vj(dm,em){var fm=new wj(em);dm.streamHistory.push(new xj(fm));if(fm.videoHeight||!dm.streamStats)dm.streamStats=fm;}function wj(dm){this.videoWidth=dm.width;this.videoHeight=dm.height;this.videoMimeType=dm.a;this.videoBandwidth=dm.bandwidth;}function xj(dm){this.timestamp=eb()/1000;this.value=dm;}function yj(dm,em,fm,gm,hm){this.b=new ih(null,[new ze(dm)]);this.a=new bh();this.a.body=em;this.a.method=fm;this.a.a=3;this.a.m=gm;this.a.c=0;dm=hm||{};for(var im in dm)this.a.b[im]=dm[im];}function zj(dm){return lh(dm.b,dm.a).then(function(em){return Promise.resolve(new Uint8Array(em));});}function ak(dm,em,fm){sc.call(this,dm);this.c=em;this.j=fm;this.a=this.h=null;this.i=new oc();this.b=[];this.f=[];this.m=0;this.g=new xc();this.l=null;}m(ak,sc);ak.prototype.destroy=function(){this.S=null;for(var dm=0;dm<this.f.length;++dm)this.f[dm].close().catch(function(){});this.f=[];this.b=this.a=this.h=null;this.g.destroy();this.g=null;this.i.destroy();this.i=null;this.l&&(i.clearTimeout(this.l),this.l=null);this.c=this.j=null;};ak.prototype.initialize=function(){var dm=new kc(),em;em=this.j;if(em.D){em=em.a.a[0];for(var fm=[],gm=0;gm<em.a.length;++gm)fm.push.apply(fm,ri(em.a[gm]));em=fm;}else em=[];for(fm=0;fm<em.length;++fm)gm=em[fm],gm.a.a||gm.b&&!ik(gm.b)||dm.push(gm.contentType,gm);for(var fm={},gm=false,hm=0;hm<em.length;++hm){var im=em[hm];if(im.a.a&&!dm.a.hasOwnProperty(im.contentType)){var jm=im.a.a,km=fm[jm];km||(km=im.a,km={audioCapabilities:void 0,videoCapabilities:void 0,initDataTypes:void 0,distinctiveIdentifier:km.g?"required":"optional",persistentState:km.i?"required":"optional",sessionTypes:["temporary"]},fm[jm]=km);if(im.b&&(jm=im.contentType+"Capabilities",jm in km)){gm=true;km[jm]||(km[jm]=[]);var lm;"audio"==im.contentType?lm=im.a.f:"video"==im.contentType&&(lm=im.a.j);km[jm].push({contentType:im.b,robustness:lm});}}}if(!gm)if(em.length){this.a=em[0].a;}else throw dm=Error("No DrmInfo exists!"),dm.type="drm",dm;if(0==Object.keys(fm).length)return hl(this.j,dm),this.g.resolve(),Promise.resolve();lm=new xc();fm=bk(fm,lm);fm=fm.then(this.v.bind(this,em,dm));lm.reject(null);return fm;};function bk(dm,em){for(var fm in dm)em=em.catch(function(gm,hm){return navigator.requestMediaKeySystemAccess(gm,[hm]);}.bind(null,fm,dm[fm]));return em;}ak.prototype.v=function(dm,em,fm){if(!this.c)return dk();for(var gm=fm.keySystem,hm=fm.getConfiguration(),im=["audio","video"],jm=0;jm<im.length;++jm){var km=im[jm];if(!em.a.hasOwnProperty(km)){var lm=hm[km+"Capabilities"];if(lm){for(var lm=lm[0],mm=[],nm={},om=0;om<dm.length;++om){var pm=dm[om],qm=lm?pm.b==lm.contentType:pm.contentType==km;pm.a.a!=gm||!qm||pm.id in nm||(mm.push(pm),nm[pm.id]=true,this.a=this.a?wd(this.a,pm.a):pm.a);}em.set(km,mm);}}}hl(this.j,em);return fm.createMediaKeys().then(function(rm){this.h=rm;}.bind(this));};function ck(dm){return dm.c?dm.h?dm.c.setMediaKeys(dm.h).then(dd(dm,function(){return this.c?this.a.c?this.h.setServerCertificate(this.a.c):Promise.resolve():dk();})).then(dd(dm,function(){if(!this.c)return dk();for(var em=0;em<this.a.b.length;++em){var fm=this.a.b[em];this.o({type:"encrypted",initDataType:fm.initDataType,initData:fm.initData});}0==this.a.b.length&&pc(this.i,this.c,"encrypted",this.o.bind(this));})):Promise.resolve():dk();}function dk(){var dm=Error("EmeManager destroyed");dm.type="destroy";return Promise.reject(dm);}ak.prototype.o=function(dm){for(var em=new Uint8Array(dm.initData),fm=0;fm<this.b.length;++fm)if(ud(em,this.b[fm].data))return;try{var hm=ek(this);}catch(gm){em=yb(gm);this.dispatchEvent(em);this.g.reject(gm);return;}dm=hm.generateRequest(dm.initDataType,dm.initData);this.b.push({data:em,Fa:hm});dm.catch(dd(this,function(im){if(this.c){for(var jm=0;jm<this.b.length;++jm)if(this.b[jm].Fa==hm){this.b.splice(jm,1);break;}jm=yb(im);this.dispatchEvent(jm);this.g.reject(im);}}));this.f.push(hm);};function ek(dm){var em=null,em=dm.h.createSession();pc(dm.i,em,"message",dm.B.bind(dm));pc(dm.i,em,"keystatuseschange",dm.A.bind(dm));return em;}ak.prototype.B=function(dm){fk(this,dm.target,this.a,dm.message);};ak.prototype.A=function(dm){dm=dm.target;var em={};dm.keyStatuses.forEach(function(gm,hm){if("string"==typeof gm){var im=gm;gm=hm;hm=im;}if("com.microsoft.playready"==this.a.a&&16==gm.byteLength){var im=new DataView(gm),jm=im.getUint32(0,true),km=im.getUint16(4,true),lm=im.getUint16(6,true);im.setUint32(0,jm,false);im.setUint16(4,km,false);im.setUint16(6,lm,false);}im=td(new Uint8Array(gm));em[im]=hm;}.bind(this));if(dm.expiration<Date.now()){for(var fm=0;fm<this.b.length;++fm)if(this.b[fm].Fa==dm){this.b.splice(fm,1);break;}dm.close();this.f.splice(this.f.indexOf(dm),1);}kl(this.j,em);};function fk(dm,em,fm,gm){gm=gk(fm,gm);zj(new yj(gm.url,gm.body,gm.method,fm.l,gm.headers)).then(dd(dm,function(hm){fm.m&&(hm=fm.m(hm));return em.update(hm);})).then(dd(dm,function(){var hm=xb({type:"sessionReady",detail:em});this.dispatchEvent(hm);this.m++;this.m>=this.f.length&&this.g.resolve();})).catch(dd(dm,function(hm){hm.Fa=em;hm=yb(hm);this.dispatchEvent(hm);}));}function gk(dm,em){var fm={url:dm.h,body:em.slice(0),method:"POST",headers:{}};if("com.microsoft.playready"===dm.a){for(var gm=String.fromCharCode.apply(null,new Uint16Array(fm.body)),gm=(new DOMParser()).parseFromString(gm,"application/xml"),hm=gm.getElementsByTagName("name"),im=gm.getElementsByTagName("value"),jm=0;jm<hm.length;jm++)fm.headers[hm[jm].childNodes[0].nodeValue]=im[jm].childNodes[0].nodeValue;fm.body=i.atob(gm.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue);}if(!dm.o)return fm;dm.o(fm);fm.url=hc(fm,"url");if(null==fm.url)throw Error("'url' cannot be null.");if(!(fm.body instanceof ArrayBuffer||"string"==typeof fm.body||null==fm.body))throw new TypeError("'body' must be an ArrayBuffer, a string, or null.");fm.method=hc(fm,"method");if("GET"!=fm.method&&"POST"!=fm.method)throw Error("'method' must be either 'GET' or 'POST'.");fm.headers=jc(fm,"headers",Object);if(null==fm.headers)throw Error("'headers' cannot be null.");return fm;}function hk(dm){sc.call(this,null);this.a=dm;this.b=null;this.f=new oc();this.i=this.h=null;this.B=0;this.v=null;this.j=false;this.F=this.G=true;this.g=new uj();this.c={enableAdaptation:true,streamBufferSize:15,liveStreamEndTimeout:15,licenseRequestTimeout:0,mpdRequestTimeout:0,segmentRequestTimeout:0,preferredLanguage:"en",restrictions:new v()};this.l=1;this.D=null;this.o=false;}m(hk,sc);l("shaka.player.Player",hk);hk.version="v1.6.4-fb";hk.isBrowserSupported=function(){return !!i.MediaSource&&!!i.Promise&&!!Element.prototype.requestFullscreen&&!!document.exitFullscreen&&"fullscreenElement" in document&&!!i.Uint8Array;};hk.prototype.U=function(dm){this.G=dm;};hk.prototype.setResumeAfterBuffering=hk.prototype.U;function ik(dm){return "text/vtt"==dm?!!i.VTTCue:MediaSource.isTypeSupported(dm);}hk.isTypeSupported=ik;hk.setTextStyle=function(dm){var em=document.getElementById("ShakaPlayerTextStyle");em||(em=document.createElement("style"),em.id="ShakaPlayerTextStyle",document.head.appendChild(em));for(em=em.sheet;em.cssRules.length;)em.deleteRule(0);em.insertRule("::cue { "+x(dm)+" }",0);};hk.prototype.destroy=function(){return this.m().then(dd(this,function(){this.f.destroy();this.a=this.f=null;})).catch(function(){});};hk.prototype.destroy=hk.prototype.destroy;hk.prototype.m=function(){if(!this.b)return Promise.resolve();this.j&&ok(this);this.a.pause();qc(this.f);nk(this);lk(this);this.h&&(this.h.destroy(),this.h=null);this.a.src="";var dm=this.a.setMediaKeys(null);this.b&&(this.b.destroy(),this.b=null);this.j=false;this.g=new uj();return dm;};hk.prototype.unload=hk.prototype.m;hk.prototype.la=function(dm){return jk(this,dm,false);};hk.prototype.load=hk.prototype.la;hk.prototype.M=function(dm){return jk(this,dm,true);};hk.prototype.loadWithSilencedErrors=hk.prototype.M;function jk(dm,em,fm){cl(em,dm.a);var gm=dm.m();dm.a.autoplay&&(p("load"),pc(dm.f,dm.a,"timeupdate",dm.sb.bind(dm)));em.Wa(dm.c);em.N=dm.D;dm.D=null;gm=gm.then(dd(dm,function(){return em.Ha();}));gm.catch(dd(dm,function(hm){em.destroy();return Promise.reject(hm);}));return gm.then(dd(dm,function(){if(!this.a)return kk();this.b=em;pc(this.f,this.b,"seekrangechanged",this.zb.bind(this));this.h=new ak(this,this.a,this.b);return this.h.initialize();})).then(dd(dm,function(){if(!this.a)return kk();pc(this.f,this.a,"error",this.Lb.bind(this));pc(this.f,this.a,"playing",this.yb.bind(this));pc(this.f,this.a,"pause",this.xb.bind(this));return dl(this.b,this,this.a);})).then(dd(dm,function(){return this.a?ck(this.h):kk();})).then(dd(dm,function(){if(!this.a)return kk();mk(this);})).catch(dd(dm,function(hm){if(!this.a)return kk();if(true!==fm&&"destroy"!=hm.type){var im=yb(hm);this.dispatchEvent(im);}return this.m().then(function(){return Promise.reject(hm);});}));}function kk(){var dm=Error("Player destroyed");dm.type="destroy";return Promise.reject(dm);}j=hk.prototype;j.sb=function(){q("load");this.g.playbackLatency=r("load")/1000;this.f.ra(this.a,"timeupdate");};j.Lb=function(){if(this.a.error){var dm=this.a.error.code;dm!=MediaError.MEDIA_ERR_ABORTED&&(dm=Error(pk[dm]||"Unknown playback error."),dm.type="playback",dm=yb(dm),this.dispatchEvent(dm));}};j.yb=function(){p("playing");!this.i&&0>this.l&&(this.a.playbackRate=0,this.A(this.a.currentTime,Date.now(),this.l));this.j&&!this.F&&ok(this);};j.xb=function(){q("playing");var dm=r("playing");if(!isNaN(dm)){var em=this.g;em.playTime+=dm/1000;}lk(this);};j.zb=function(dm){this.B=dm.start;};j.ib=function(){if(!this.a.paused){q("playing");var dm=r("playing");if(!isNaN(dm)){var em=this.g;em.playTime+=dm/1000;p("playing");}}dm=this.g;em=this.a;em.getVideoPlaybackQuality&&(em=em.getVideoPlaybackQuality(),dm.decodedFrames=em.totalVideoFrames,dm.droppedFrames=em.droppedVideoFrames);return this.g;};hk.prototype.getStats=hk.prototype.ib;hk.prototype.ka=function(){return this.b?this.b.M():[];};hk.prototype.getVideoTracks=hk.prototype.ka;hk.prototype.ca=function(){return this.b?this.b.ca():[];};hk.prototype.getAudioTracks=hk.prototype.ca;hk.prototype.ea=function(){return this.b?this.b.Ya():[];};hk.prototype.getTextTracks=hk.prototype.ea;hk.prototype.selectVideoTrack=function(dm,em){return this.b?this.b.selectVideoTrack(dm,void 0==em?true:em):false;};hk.prototype.selectVideoTrack=hk.prototype.selectVideoTrack;hk.prototype.ma=function(dm,em,fm){return this.b?ml(this.b,"audio",dm,void 0==em?true:em,fm):false;};hk.prototype.selectAudioTrack=hk.prototype.ma;hk.prototype.na=function(dm){return this.b?ml(this.b,"text",dm,false):false;};hk.prototype.selectTextTrack=hk.prototype.na;hk.prototype.ba=function(dm){this.b&&il(this.b,dm);};hk.prototype.enableTextTrack=hk.prototype.ba;hk.prototype.T=function(dm){lk(this);0<=dm?this.a.playbackRate=dm:this.a.paused||(this.a.playbackRate=0,this.A(this.a.currentTime,Date.now(),dm));this.l=dm;};hk.prototype.setPlaybackRate=hk.prototype.T;hk.prototype.L=function(){return this.l;};hk.prototype.getPlaybackRate=hk.prototype.L;hk.prototype.oa=function(dm){this.D=dm;};hk.prototype.setPlaybackStartTime=hk.prototype.oa;hk.prototype.I=function(){return this.b?this.b.Za():false;};hk.prototype.isLive=hk.prototype.I;hk.prototype.aa=function(dm){if(dm){var em=fc(dm,"enableAdaptation");null!=em&&(this.c.enableAdaptation=em);em=fc(dm,"endBufferingOnPlaying");null!=em&&(this.F=em);em=fc(dm,"usePlaybackRateForBuffering");null!=em&&(this.o=em);em=gc(dm,"streamBufferSize",0);null!=em&&(this.c.streamBufferSize=em);em=fc(dm,"addCdnDebugQueryParameters");null!=em&&(this.c.addCdnDebugQueryParameters=em);em=gc(dm,"initialStreamBufferSize",0);null!=em&&(this.c.initialStreamBufferSize=em);em=fc(dm,"includeStreamBufferSizeInStartOffset");null!=em&&(this.c.includeStreamBufferSizeInStartOffset=em);em=gc(dm,"liveStreamEndTimeout",0);null!=em&&(this.c.liveStreamEndTimeout=em);em=gc(dm,"licenseRequestTimeout",0);null!=em&&(this.c.licenseRequestTimeout=em);em=gc(dm,"mpdRequestTimeout",0);null!=em&&(this.c.mpdRequestTimeout=em);em=gc(dm,"minMpdRefreshInterval",0);null!=em&&(this.c.minMpdRefreshInterval=em);em=fc(dm,"enableLiveInterruptionDetection");null!=em&&(this.c.enableLiveInterruptionDetection=em);em=fc(dm,"resolveVideoTimeUpdateOnFragmentedTimeRanges");null!=em&&(this.c.resolveVideoTimeUpdateOnFragmentedTimeRanges=em);em=gc(dm,"liveInterruptionConsecutiveUpdatesWithoutChange");null!=em&&(this.c.liveInterruptionConsecutiveUpdatesWithoutChange=em);em=gc(dm,"liveInterruptionConsecutiveUpdatesWithChange");null!=em&&(this.c.liveInterruptionConsecutiveUpdatesWithChange=em);em=fc(dm,"liveSendPushHeaders");null!=em&&(this.c.liveSendPushHeaders=em);em=gc(dm,"segmentRequestTimeout",0);null!=em&&(this.c.segmentRequestTimeout=em);em=hc(dm,"preferredLanguage");null!=em&&(this.c.preferredLanguage=em);em=jc(dm,"restrictions",v);null!=em&&(this.c.restrictions=em.clone());dm=fc(dm,"disableCacheBustingEvenThoughItMayAffectBandwidthEstimation");null!=dm&&(ch=!dm);this.b&&this.b.Wa(this.c);}};hk.prototype.configure=hk.prototype.aa;hk.prototype.da=function(){return this.c;};hk.prototype.getConfiguration=hk.prototype.da;function lk(dm){dm.i&&(i.clearTimeout(dm.i),dm.i=null);}function mk(dm){nk(dm);dm.v=i.setTimeout(dm.N.bind(dm),100);}function nk(dm){dm.v&&(i.clearTimeout(dm.v),dm.v=null);}hk.prototype.A=function(dm,em,fm){this.i=null;var gm=(Date.now()-em)/1000*fm;this.a.currentTime<this.B+(this.I()?1:.05)?this.a.pause():(gm=Math.max(this.B,dm+gm),this.a.currentTime=gm,this.i=i.setTimeout(this.A.bind(this,dm,em,fm),250));};function ok(dm){q("buffering");var em=dm.g;em.bufferingTime+=r("buffering")/1000;dm.o&&(dm.a.playbackRate=dm.l);dm.j=false;dm.dispatchEvent(xb({type:"bufferingEnd"}));}hk.prototype.N=function(){mk(this);if(!this.a.ended&&!this.a.seeking){var dm=this.a.buffered,em=dm.length?dm.end(dm.length-1):0,dm=Math.max(em-this.a.currentTime,0),fm=this.a.currentTime,gm=this.a.duration,gm=isNaN(gm)?0:Math.max(gm-.05,0),em=em>=gm||fm>=gm;this.j?(em=this.b,dm>(em.La?Number(em.g.streamBufferSize):Number(em.g.initialStreamBufferSize))&&(ok(this),this.G&&!this.o&&this.a.play())):!this.a.paused&&!em&&.5>dm&&(this.j=true,this.o?this.a.playbackRate=0:this.a.pause(),this.g.bufferingHistory.push(eb()/1000),p("buffering"),this.dispatchEvent(xb({type:"bufferingStart"})));}};var pk={2:"A network failure occured while loading media content.",3:"The browser failed to decode the media content.",4:"The browser does not support the media content."};function qk(dm){for(var em=0;em<dm.length;++em)for(var fm=dm[em],gm=0;gm<fm.a.length;++gm){for(var hm=fm.a[gm],im=hm,jm=0;jm<im.s.length;++jm)ik(oi(im.s[jm]))||(im.s.splice(jm,1),--jm);0==hm.s.length&&(fm.a.splice(gm,1),--gm);}}function rk(dm){for(var em=0;em<dm.length;++em)for(var fm=dm[em],gm=0;gm<fm.a.length;++gm)fm.a[gm].s.sort(sk);}function sk(dm,em){var fm=dm.bandwidth||Number.MAX_VALUE,gm=em.bandwidth||Number.MAX_VALUE;return fm<gm?-1:fm>gm?1:0;}function tk(dm){this.a=dm;}tk.prototype.destroy=function(){this.a.destroy();this.a=null;};tk.prototype.update=function(dm){var em=uk(dm),fm=uk(this.a);return Promise.all([em,fm]).then(dd(this,function(gm){var hm=gm[0];gm=gm[1];var im=this.a.a;qk(im);rk(im);dm.b&&!this.a.b&&(dm.h=true);dm.f=this.a.f;dm.g=this.a.g?this.a.g.clone():null;dm.c=this.a.c;im=[];vk(dm,this.a,hm,gm,im);hm=dm.a;qk(hm);rk(hm);return Promise.resolve(im);}));};function uk(dm){function em(gm,hm){return gm.concat(hm);}var fm=dm.a.map(function(gm){return gm.a;}).reduce(em,[]).map(function(gm){return gm.s;}).reduce(em,[]);dm=fm.map(function(gm){return gm.J.create();});return Promise.all(dm).then(function(gm){for(var hm={},im=0;im<fm.length;++im)hm[fm[im].C]=gm[im];return Promise.resolve(hm);});}function vk(dm,em,fm,gm,hm){var im=new kc();dm.a.forEach(function(mm,nm){im.push(mm.id||""+nm,mm);});var jm=new kc();em.a.forEach(function(mm,nm){jm.push(mm.id||""+nm,mm);});dm=nc(im);for(em=0;em<dm.length;++em){var km=dm[em],lm=im.get(km);1<lm.length||(km=jm.get(km))&&0!=km.length&&1==km.length&&(wk(lm[0],km[0],fm,gm,hm),lm[0].b=km[0].b);}}function wk(dm,em,fm,gm,hm){var im=new kc();dm.a.forEach(function(mm,nm){im.push(mm.id||""+nm,mm);});var jm=new kc();em.a.forEach(function(mm,nm){jm.push(mm.id||""+nm,mm);});dm=nc(im);for(em=0;em<dm.length;++em){var km=dm[em],lm=im.get(km);1<lm.length||(km=jm.get(km))&&0!=km.length&&1==km.length&&xk(lm[0],km[0],fm,gm,hm);}}function xk(dm,em,fm,gm,hm){var im=new kc();dm.s.forEach(function(om,pm){im.push(om.id||""+pm,om);});var jm=new kc();em.s.forEach(function(om,pm){jm.push(om.id||""+pm,om);});em={};for(var km=nc(im),lm=0;lm<km.length;++lm){var mm=km[lm];em[mm]=mm;var nm=im.get(mm);1<nm.length||((mm=jm.get(mm))&&0!=mm.length?1==mm.length&&(yk(nm[0],mm[0],fm,gm),nm[0].K=mm[0].K,mm[0].K=null,nm[0].b=mm[0].b):(hm.push(nm[0]),dm.s.splice(dm.s.indexOf(nm[0]),1)));}km=nc(jm);for(lm=0;lm<km.length;++lm)mm=km[lm],em[mm]||(em[mm]=mm,mm=jm.get(mm),dm.s.push(mm[0]));}function yk(dm,em,fm,gm){dm=fm[dm.C];gm=gm[em.C];em=dm.length();dm.Da(gm)&&(gm=dm.length(),dm.j.push(em!==gm),50<dm.j.length&&dm.j.shift());}function zk(){this.a=this.b=null;this.f=new oc();this.c=Number.POSITIVE_INFINITY;this.i=true;this.g=false;}l("shaka.media.SimpleAbrManager",zk);zk.prototype.destroy=function(){this.f.destroy();this.a=this.b=this.f=null;};zk.prototype.initialize=function(dm,em){this.b||this.a||(this.b=dm,this.a=em);};zk.prototype.start=function(){this.b&&this.a&&!this.g&&(this.c=Date.now()+4000,pc(this.f,this.b,"bandwidth",this.l.bind(this)),pc(this.f,this.a,"adaptation",this.j.bind(this)),pc(this.f,this.a,"trackschanged",this.h.bind(this)),this.g=true);};zk.prototype.enable=function(dm){this.i=dm;};zk.prototype.getInitialVideoTrackId=function(){if(!this.b||!this.a)return null;var dm=al(this);return dm?dm.id:null;};zk.prototype.getInitialSwitchReason=function(){return null;};zk.prototype.getInitialAudioTrackId=function(){return null;};zk.prototype.selectVideoTrack=function(dm,em,fm){this.g&&this.a.selectVideoTrack(dm.id,em,fm);};zk.prototype.l=function(){Date.now()<this.c||this.h();};zk.prototype.h=function(){if(this.i){var dm=al(this);if(dm){if(dm.active){this.c=Date.now()+3000;return;}this.selectVideoTrack(dm,false);}this.c=Number.POSITIVE_INFINITY;}};zk.prototype.j=function(){this.c==Number.POSITIVE_INFINITY&&(this.c=Date.now()+30000);};function al(dm){var em=dm.a.M();if(0==em.length)return null;em.sort(fa);var fm;dm:{fm=dm.a.ca();for(var gm=0;gm<fm.length;++gm)if(fm[gm].active){fm=fm[gm];break dm;}fm=null;};fm=fm?fm.bandwidth:0;dm=dm.b.getBandwidth();for(var gm=em[0],hm=0;hm<em.length;++hm){var im=em[hm],jm=hm+1<em.length?em[hm+1]:{bandwidth:Number.POSITIVE_INFINITY};if(im.bandwidth&&(jm=(jm.bandwidth+fm)/.85,dm>=(im.bandwidth+fm)/.95&&dm<=jm&&(gm=im,gm.active)))break;}return gm;}function bl(dm,em,fm){sc.call(this,null);this.a=dm;this.da=em;this.j=new oc();this.h=new MediaSource();this.f=null;this.oa=0;this.Pa=false;this.na=0;this.ma=3;this.la=this.La=false;this.c=new kc();this.l=fm;this.l.initialize(em,this);this.D=false;this.B="en";this.ea=false;this.G=null;this.v=new xc();this.ab=new xc();this.i=new v();this.A=null;this.Sa=1;this.b={};this.aa=new xc();this.T=0;this.Ra=15;this.o=null;this.Ma=this.Qa=false;this.m={};this.N=this.L=this.I=null;this.g={};this.$a=null;}m(bl,sc);l("shaka.player.StreamVideoSource",bl);bl.prototype.Wa=function(dm){null!=dm.streamBufferSize&&(this.g.streamBufferSize=dm.streamBufferSize);null!=dm.initialStreamBufferSize&&(this.g.initialStreamBufferSize=dm.initialStreamBufferSize);null!=dm.addCdnDebugQueryParameters&&(this.g.addCdnDebugQueryParameters=dm.addCdnDebugQueryParameters);null!=dm.segmentRequestTimeout&&(this.g.segmentRequestTimeout=dm.segmentRequestTimeout);null!=dm.resolveVideoTimeUpdateOnFragmentedTimeRanges&&(this.g.resolveVideoTimeUpdateOnFragmentedTimeRanges=dm.resolveVideoTimeUpdateOnFragmentedTimeRanges);bm(this);null!=dm.includeStreamBufferSizeInStartOffset&&(this.Pa=Boolean(dm.includeStreamBufferSizeInStartOffset));null!=dm.enableAdaptation&&this.l.enable(Boolean(dm.enableAdaptation));null!=dm.mpdRequestTimeout&&(this.na=Number(dm.mpdRequestTimeout));null!=dm.minMpdRefreshInterval&&(this.ma=Number(dm.minMpdRefreshInterval)/1000);null!=dm.liveStreamEndTimeout&&(this.Ra=Number(dm.liveStreamEndTimeout));null!=dm.preferredLanguage&&(this.B=cc(String(dm.preferredLanguage)));null!=dm.liveSendPushHeaders&&(this.la=Boolean(dm.liveSendPushHeaders));null!=dm.restrictions&&(this.i=dm.restrictions,this.D&&jl(this));};bl.prototype.destroy=function(){this.v.destroy();this.aa.destroy();this.aa=this.v=null;this.L&&(i.clearTimeout(this.L),this.L=null);this.I&&(i.clearTimeout(this.I),this.I=null);this.m=null;this.j.destroy();this.j=null;ec(this.b).forEach(function(dm){dm.destroy();});this.c=this.b=null;this.a&&(this.a.destroy(),this.a=null);this.l.destroy();this.S=this.i=this.G=this.f=this.h=this.da=this.l=null;};function cl(dm,em){pc(dm.j,dm.h,"sourceopen",dm.tb.bind(dm));em.src=i.URL.createObjectURL(dm.h);}function dl(dm,em,fm){if(!dm.D)return dm=Error("Cannot call attach() right now."),dm.type="app",Promise.reject(dm);dm.S=em;dm.f=fm;dm.G=em.ib();pc(dm.j,dm.da,"bandwidth",dm.Mb.bind(dm));dm.a.b&&(pc(dm.j,em,"bufferingStart",dm.rb.bind(dm)),pc(dm.j,em,"bufferingEnd",dm.qb.bind(dm)));em=dm.f.setMediaKeys(dm.f.mediaKeys);dm.ab.then(dd(dm,function(){ol(this).then(dd(this,function(){this.v&&this.v.resolve();})).catch(dd(this,function(gm){this.v&&this.v.reject(gm);}));}));return Promise.all([dm.v,em]);}j=bl.prototype;j.Ha=function(){if(this.D){var dm=Error("Cannot call load() right now.");dm.type="app";return Promise.reject(dm);}if(!this.a||0==this.a.a.length)return dm=Error("The manifest does not specify any content."),dm.type="stream",Promise.reject(dm);dm=this.a.a;qk(dm);rk(dm);if(0==this.a.a.length||0==this.a.a[0].a.length)return dm=Error("The manifest specifies content that cannot be displayed on this browser/platform."),dm.type="stream",Promise.reject(dm);this.D=true;this.g.initialStreamBufferSize=Math.max(this.g.initialStreamBufferSize||0,this.a.c);bm(this);jl(this);return Promise.resolve();};function el(dm){var em=xb({type:"manifestwrapped",bubbles:true});dm.dispatchEvent(em);}j.eb=function(dm){var em=Date.now(),fm=this.I=null,gm,hm;if(this.la){gm=Math.floor(yl(this))+1;var im=this.b.video;if(im=im?im.Aa():null)im=im.w(),null!=im.c&&(hm=im.c);}im=this.a.g;(dm?this.bb():this.cb(im,gm,hm)).then(dd(this,function(jm){fm=new tk(jm);return fm.update(this.a);})).then(dd(this,function(jm){fm.destroy();fm=null;xl(this).some(function(lm){return lm.Ka;})&&el(this);var km=zl(this,xl(this));km&&this.f.paused&&km.end>this.f.currentTime+10&&(this.f.currentTime=km.end);if(this.a.h&&this.f.currentTime+.5>this.T)return this.sa();for(km=0;km<jm.length;++km)gl(this,jm[km]);this.g.initialStreamBufferSize=Math.max(this.g.initialStreamBufferSize||0,this.a.c);this.g.useInitialBufferSizeWhenPaused=this.a.b;bm(this);jl(this);0==Object.keys(this.b).length?ol(this):fl(this,(Date.now()-em)/1000);})).catch(dd(this,function(jm){fm&&(fm.destroy(),fm=null);"aborted"!=jm.type&&(jm=yb(jm),this.dispatchEvent(jm),this.a&&fl(this,0));}));};j.cb=function(){return Promise.reject("Cannot update manifest with this VideoSource implementation.");};j.bb=function(){return Promise.reject("Cannot update manifest with this VideoSource implementation.");};function fl(dm,em){if(null!=dm.a.f){var fm=Math.max(dm.a.f,dm.ma),fm=Math.max(fm-em,0);dm.I=i.setTimeout(dm.eb.bind(dm,false),1000*fm);}}function gl(dm,em){var fm=em.a.split("/")[0],gm=dm.b[fm];if(gm&&gm.pa()==em){var hm=dm.c.get(em.a.split("/")[0]).map(function(im){return im.s;}).reduce(function(im,jm){return im.concat(jm);},[]).filter(function(im){return im.O&&im.H;});if(0==hm.length){fm=Error("All usable streams have been removed from the manifest.");fm.type="app";fm=yb(fm);dm.dispatchEvent(fm);return;}dm.m[fm].Ia==em&&delete dm.m[fm];gm.qa(hm[0],true);em.destroy();}em.destroy();}j.Kb=function(dm){this.$a=dm;};bl.prototype.setTaggedTimeRangesEntryAdder=bl.prototype.Kb;bl.prototype.M=function(){if(!this.c.a.hasOwnProperty("video"))return [];for(var dm=this.b.video,dm=(dm=dm?dm.pa():null)?dm.C:0,em=[],fm=this.c.get("video"),gm=0;gm<fm.length;++gm)for(var hm=fm[gm],im=0;im<hm.s.length;++im){var jm=hm.s[im];if(jm.O&&jm.H){var km=jm.C,jm=new ea(km,jm.bandwidth,jm.width,jm.height,jm.id,jm.fbQualityLabel,jm.fbQualityClass);km==dm&&(jm.active=true);em.push(jm);}}return em;};bl.prototype.getVideoTracks=bl.prototype.M;bl.prototype.ca=function(){if(!this.c.a.hasOwnProperty("audio"))return [];for(var dm=this.b.audio,dm=(dm=dm?dm.pa():null)?dm.C:0,em=[],fm=this.c.get("audio"),gm=0;gm<fm.length;++gm)for(var hm=fm[gm],im=hm.lang,jm=0;jm<hm.s.length;++jm){var km=hm.s[jm];if(km.O&&km.H){var lm=km.C,km=new u(lm,km.bandwidth,im,km.id);lm==dm&&(km.active=true);em.push(km);}}return em;};bl.prototype.getAudioTracks=bl.prototype.ca;bl.prototype.Ya=function(){if(!this.c.a.hasOwnProperty("text"))return [];for(var dm=this.b.text,em=dm?dm.pa():null,em=em?em.C:0,fm=[],gm=this.c.get("text"),hm=0;hm<gm.length;++hm)for(var im=gm[hm],jm=im.lang,km=0;km<im.s.length;++km){var lm=im.s[km].C,mm=new da(lm,jm);lm==em&&(mm.active=true,mm.enabled=dm.xa());fm.push(mm);}return fm;};bl.prototype.getTextTracks=bl.prototype.Ya;function hl(dm,em){if(dm.D){for(var fm={},gm=dm.a.a[0],hm=0;hm<gm.a.length;++hm){var im=gm.a[hm];fm[im.C]=im;}dm.c.a={};gm=nc(em);for(hm=0;hm<gm.length;++hm){var im=gm[hm],jm=em.get(im);if("video"==im){var km=jm[0].id;dm.c.push(im,fm[km]);}else if("audio"==im){for(var km=jm[0].b.split(";")[0],lm=0;lm<jm.length;++lm){var mm=jm[lm];mm.b.split(";")[0]==km&&dm.c.push(im,fm[mm.id]);}}else for(lm=0;lm<jm.length;++lm)km=jm[lm].id,dm.c.push(im,fm[km]);}dm.ea=true;if(fm=dm.c.get("audio"))nl(dm,fm),dm.c.set("audio",fm),fm=fm[0].lang||dm.B,zb(2,dm.B,fm)&&(dm.ea=false);if(fm=dm.c.get("text"))nl(dm,fm),dm.c.set("text",fm),fm=fm[0].lang||dm.B,zb(2,dm.B,fm)||(dm.ea=false);}}bl.prototype.selectVideoTrack=function(dm,em,fm,gm){return ml(this,"video",dm,em,fm,gm);};function il(dm,em){var fm=dm.b.text;fm&&fm.ta(em);}function jl(dm){if(dm.i){for(var em=false,fm=0;fm<dm.a.a.length;++fm)for(var gm=dm.a.a[fm],hm=0;hm<gm.a.length;++hm){var im=gm.a[hm];if("video"==im.contentType)for(var jm=0;jm<im.s.length;++jm){var km=im.s[jm],lm=km.H;km.H=true;dm.i.maxWidth&&km.width>dm.i.maxWidth&&(km.H=false);dm.i.maxHeight&&km.height>dm.i.maxHeight&&(km.H=false);dm.i.minHeight&&km.height<dm.i.minHeight&&(km.H=false);dm.i.maxBandwidth&&km.bandwidth>dm.i.maxBandwidth&&(km.H=false);dm.i.minBandwidth&&km.bandwidth<dm.i.minBandwidth&&(km.H=false);lm!=km.H&&(em=true);}}0!=lc(dm.c).length&&em&&(ll(dm),0<dm.M().length||(em=Error("The application has restricted all video tracks!"),em.type="app",em=yb(em),dm.dispatchEvent(em)));}}bl.prototype.Za=function(){return this.a?this.a.b:false;};bl.prototype.isLive=bl.prototype.Za;bl.prototype.lb=function(dm){this.La=dm;};bl.prototype.setIsLiveInterrupted=bl.prototype.lb;function kl(dm,em){for(var fm,gm=false,hm=new kc(),im=lc(dm.c),jm=0;jm<im.length;++jm)for(var km=im[jm],lm=0;lm<km.s.length;++lm){var mm=km.s[lm];mm.f.forEach(function(nm){hm.push(nm,mm);});}for(fm in em)if(im=ub[em[fm]]||null,km=hm.get(fm)){for(jm=0;jm<km.length;++jm)mm=km[jm],lm=mm.O,mm.O=!im,lm!=mm.O&&(gm=true);}else yc(fm);gm&&(ll(dm),gm=dm.ca(),fm=dm.M(),gm=dm.c.a.hasOwnProperty("audio")&&0==gm.length,fm=dm.c.a.hasOwnProperty("video")&&0==fm.length,gm||fm)&&(fm=Error("The key system has restricted all "+(gm&&fm?"audio and video tracks.":gm?"audio tracks.":"video tracks.")),fm.type="drm",fm=yb(fm),dm.dispatchEvent(fm));}function ll(dm){var em=xb({type:"trackschanged",bubbles:true});dm.dispatchEvent(em);}function ml(dm,em,fm,gm,hm,im){if(!dm.c.a.hasOwnProperty(em)||!dm.b[em])return false;for(var jm=dm.c.get(em),km=0;km<jm.length;++km)for(var lm=jm[km],mm=0;mm<lm.s.length;++mm){var nm=lm.s[mm];if(nm.C==fm){if(!nm.O||!nm.H)return false;if("text"!=em&&!dm.Ma)return fm=dm.m[em],dm.m[em]={Ia:nm,Ta:null!=fm&&fm.Ta||gm,Ua:null!=fm&&fm.Ua||hm,switchReason:im},true;vj(dm.G,nm);dm.b[em].qa(nm,gm,hm,im);return true;}}return false;}function nl(dm,em){for(var fm=0;2>=fm;++fm)for(var gm=0;gm<em.length;++gm){var hm=em[gm];if(zb(fm,dm.B,hm.lang)){em.splice(gm,1);em.splice(0,0,hm);return;}}for(gm=0;gm<em.length;++gm)if(hm=em[gm],hm.b){em.splice(gm,1);em.splice(0,0,hm);break;}}j=bl.prototype;j.tb=function(){this.j.ra(this.h,"sourceopen");this.ab.resolve();};function ol(dm){for(var em=[],fm=["audio","video","text"],gm=0;gm<fm.length;++gm){var hm=fm[gm];dm.c.a.hasOwnProperty(hm)&&em.push(dm.c.get(hm)[0]);}for(var im=pl(dm,em),gm=0;gm<fm.length;++gm)if(hm=fm[gm],dm.c.a.hasOwnProperty(hm)&&!im[hm])return dm=Error("Unable to select an initial "+hm+" stream: all "+hm+" streams have been restricted (by the application or by the key system)."),dm.type="stream",Promise.reject(dm);em=ec(im).map(function(jm){return jm.J.create();});return Promise.all(em).then(dd(dm,function(jm){if(!jm.every(function(km){return km.length();}))return jm=Error("Some streams are not available."),jm.type="stream",Promise.reject(jm);jm=zl(this,jm);if(!jm)return jm=Error("Some streams are not available."),jm.type="stream",Promise.reject(jm);if(!ql(this,im))return jm=Error("Failed to create Stream objects."),jm.type="stream",Promise.reject(jm);this.l.start();sl(this,im,jm);return Promise.resolve();})).catch(dd(dm,function(jm){if("aborted"!=jm.type)return Object.keys(this.b),this.a.b?(eb()<this.a.i?(jm=Math.max(this.a.i-Date.now()/1000,this.ma),this.I=i.setTimeout(this.eb.bind(this,true),1000*jm)):fl(this,0),Promise.resolve()):Promise.reject(jm);}));}function pl(dm,em){for(var fm={},gm=0;gm<em.length;++gm){var hm=em[gm],im=null;if("video"==hm.contentType){var jm=dm.l.getInitialVideoTrackId();if(null==jm)continue;im=hm.s.filter(function(km){return km.C==jm;});if(0==im.length)continue;im=im[0];}else if("audio"==hm.contentType){if(jm=dm.l.getInitialAudioTrackId(),im=hm.s.filter(function(km){return km.C==jm;}),0==im.length){im=hm.s.filter(function(km){return km.O&&km.H;});if(0==im.length)continue;im=hm.s[Math.floor(im.length/2)];}else im=im[0];}else 0<hm.s.length&&(im=hm.s[0]);fm[hm.contentType]=im;}return fm;}function ql(dm,em){var fm={},gm;for(gm in em){var hm=em[gm],hm="text"==gm?new fj(dm,dm.f):rl(dm,hm);if(!hm)return ec(fm).forEach(function(im){im.destroy();}),false;fm[gm]=hm;}dm.b=fm;return true;}function rl(dm,em){var fm=new vi(dm,dm.f,dm.h,oi(em),dm.da,dm.$a);fm.D(dm.g);return fm;}function sl(dm,em,fm){dm.Sa=dm.f.playbackRate;dm.f.playbackRate=0;ul(dm,fm);var gm;dm.N&&dm.N<=fm.end&&dm.N>=fm.start?gm=dm.N:dm.a.b?(gm=fm.end,dm.Qa=true):gm=fm.start;pc(dm.j,dm.f,"seeking",dm.Ab.bind(dm));dm.f.currentTime!=gm&&(dm.f.currentTime=gm,dm.A=gm);vl(dm,fm.start,fm.end);var hm=[],im;for(im in dm.b){fm=dm.b[im];dd(dm,function(km){hm.push(km.jb(this.aa).then(dd(this,function(lm){var mm=km.ya();mm>this.oa&&(this.oa=mm);return lm;})));})(fm);pc(dm.j,fm,"ended",dm.Bb.bind(dm));gm=em[im];vj(dm.G,gm);var jm=dm.l.getInitialSwitchReason()||void 0;fm.qa(gm,false,void 0,jm);}Promise.all(hm).then(dm.pb.bind(dm)).catch(dd(dm,function(km){"destroy"!=km.type&&(km=yb(km),this.dispatchEvent(km));}));il(dm,dm.ea);}j.pb=function(dm){n(dm&&dm.length==Object.keys(this.b).length);for(var em=Number.POSITIVE_INFINITY,fm=Number.NEGATIVE_INFINITY,gm=0;gm<dm.length;++gm)var hm=dm[gm],em=Math.min(em,hm),fm=Math.max(fm,hm);dm=xl(this);for(gm=0;gm<dm.length;++gm)dm[gm].ia(fm);tl(this,dm,fm);gm=lc(this.c).map(function(im){return im.s;}).reduce(function(im,jm){return im.concat(jm);},[]).map(function(im){var jm=[im.J.create()];im.K&&jm.push(im.K.create());return Promise.all(jm);});Promise.all(gm).then(dd(this,function(im){for(var jm=0;jm<im.length;++jm)im[jm][0].ia(fm);this.Ma=true;for(var km in this.m)im=this.m[km],jm=this.b[km],vj(this.G,im.Ia),jm.qa(im.Ia,im.Ta,im.Ua,im.switchReason);this.m={};})).catch(dd(this,function(im){"aborted"!=im.type&&(im=yb(im),this.dispatchEvent(im));}));};function tl(dm,em,fm){if(em=zl(dm,em))ul(dm,em),vl(dm,em.start,em.end);0!=fm&&(fm=dm.f.currentTime+fm,dm.f.currentTime=fm,dm.A=fm);dm.Qa&&em&&(dm.f.currentTime=em.end);dm.f.playbackRate=dm.Sa;dm.a.b&&null!=dm.a.f&&fl(dm,0);am(dm);dm.aa.resolve();}function ul(dm,em){if(dm.a.b){isNaN(dm.h.duration)&&(dm.h.duration=em.end+2592000);}else if(isNaN(dm.h.duration)||em.end>dm.h.duration){dm.h.duration=em.end;for(var fm=0;fm<dm.h.sourceBuffers.length;++fm)dm.h.sourceBuffers[fm].appendWindowEnd=em.end;}}j.Cb=function(){this.L=null;am(this);var dm=zl(this,xl(this));dm&&(this.a.b&&this.T!=dm.w&&(this.T=dm.w,null!=this.o&&(i.clearTimeout(this.o),this.o=null)),vl(this,dm.start,dm.end),this.f.paused||wl(this,this.f.currentTime,dm.start,dm.end));};function vl(dm,em,fm){em=xb({type:"seekrangechanged",bubbles:true,start:em,end:fm});dm.dispatchEvent(em);}j.Ab=function(){var dm=this.f.currentTime;if(null!=this.A){if(dm>=this.A-.01&&dm<=this.A+.01){this.A=null;return;}this.A=null;}var em=zl(this,xl(this));if(em){var fm=em.end;(em=wl(this,dm,em.start,fm))||(dm<=fm+.01?em=false:(this.f.currentTime=fm,em=true));if(!em)for(var gm in this.b)this.b[gm].gb();}};function wl(dm,em,fm,gm){if(em>=fm-.01)return false;em=0;if(dm.a.b){em=.5;for(var hm in dm.b)if(!dm.b[hm].hb(fm+em)){em=dm.a.c;break;}}dm.f.currentTime=Math.min(fm+em,gm);return true;}j.Bb=function(){if(!this.a.b){for(var dm in this.b)if(!this.b[dm].Ca())return;this.sa();}};j.rb=function(){if(this.a.h&&this.f.currentTime+.5>this.T)return this.sa();ec(this.b).every(function(dm){return dm.Ca();})&&(this.o=i.setTimeout(this.sa.bind(this),1000*this.Ra));};j.qb=function(){null!=this.o&&(i.clearTimeout(this.o),this.o=null);};j.Mb=function(){var dm=this.G,em=this.da.getBandwidth();dm.estimatedBandwidth=em;dm.bandwidthHistory.push(new xj(em));};j.sa=function(){this.o=null;this.h.endOfStream();};function xl(dm){return ec(dm.b).map(function(em){return em.Aa();}).filter(function(em){return null!=em;});}function yl(dm){return Math.max(dm.a?dm.a.c:1,dm.Pa?dm.g.streamBufferSize||0:0);}function zl(dm,em){for(var fm=0,gm=Number.POSITIVE_INFINITY,hm=Number.POSITIVE_INFINITY,im=0;im<em.length;++im){var jm=em[im].za(),fm=Math.max(fm,jm.start);null!=jm.end&&(gm=Math.min(gm,jm.end));em[im].length()&&(hm=Math.min(hm,em[im].w().a));}if(gm==Number.POSITIVE_INFINITY)if(gm=dm.a.a[0],gm.b){gm=(gm.start||0)+gm.b;}else return null;dm.a.b&&(im=yl(dm),gm=Math.max(gm-im,fm));if(fm>gm)return null;gm=Math.floor(100000*gm)/100000;return {start:fm,end:gm,w:hm};}function am(dm){dm.a.b&&(dm.L=i.setTimeout(dm.Cb.bind(dm),1000));}function bm(dm){for(var em in dm.b)dm.b[em].D(dm.g);}j.ya=function(){return this.oa;};bl.prototype.getLongestInitResponseTime=bl.prototype.ya;function cm(dm,em,fm,gm){fm||(fm=new uc());gm||(gm=new zk());bl.call(this,null,fm,gm);"string"===typeof dm?this.kb=dm:this.Va=dm;this.U=null;this.ba=em;this.ka=[];this.Na=[];this.Oa=[];this.F=null;}m(cm,bl);l("shaka.player.DashVideoSource",cm);cm.prototype.mb=function(dm,em,fm){this.ka.push(dm);this.Na.push(em||"");this.Oa.push(fm||"");};cm.prototype.addExternalCaptions=cm.prototype.mb;cm.prototype.ob=function(dm){this.F=dm;};cm.prototype.setNetworkCallback=cm.prototype.ob;cm.prototype.destroy=function(){this.U=this.F=this.ba=null;bl.prototype.destroy.call(this);};cm.prototype.Ha=function(){var dm=dd(this,function(gm){this.U=gm;for(var hm=0;hm<this.ka.length;hm++){var im=gm,jm=this.ka[hm],km=this.Na[hm],lm=this.Oa[hm];if(0!==im.a.length){var mm=new rf();mm.contentType="text";mm.lang=km||"en";mm.c=true;km=new uf();km.bandwidth=0;km.f=lm||"text/vtt";km.u=[new ze(jm)];mm.a.push(km);im.a[0].b.push(mm);ig(im.a[0]);}}this.a=jj(new ij(this.ba),gm,this.F);return bl.prototype.Ha.call(this);});if(this.Va)return dm(this.Va);var em=[new ze(this.kb)],fm;this.la&&(fm=Math.floor(yl(this))+1);em=new ih(this.F,em);return oh(new nh(em,this.na,fm)).then(dm);};cm.prototype.cb=function(dm,em,fm){return oh(new nh(dm,this.na,em,fm)).then(dd(this,function(gm){this.U=gm;gm=jj(new ij(this.ba),gm,this.F);return Promise.resolve(gm);}));};cm.prototype.bb=function(){var dm=jj(new ij(this.ba),this.U,this.F);return Promise.resolve(dm);};}.bind(h,b))();f.exports=h.shaka;},null);
__d('VideoQualityClasses',['VideoQualityClassInternal'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('VideoQualityClassInternal').orderedValues;},null);
__d('CustomAbrManager',['EventListener','SubscriptionsHandler','Shaka','VideoPlayerStreamSwitchReasons','VideoQualityClasses','VideoPlayerShakaExperiments'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('Shaka').player.VideoTrack;function i(j){'use strict';this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager3=new (c('SubscriptionsHandler'))();this.$CustomAbrManager4=Number.POSITIVE_INFINITY;this.$CustomAbrManager5=true;this.$CustomAbrManager6=false;this.$CustomAbrManager7=j.maxWidth;this.$CustomAbrManager8=j.maxHeight;this.$CustomAbrManager9=j.forceHighQualityDefault;this.$CustomAbrManager10=j.initiallyForcedRepresentations;this.$CustomAbrManager11=null;this.$CustomAbrManager12=null;this.$CustomAbrManager13=null;}i.prototype.destroy=function(){'use strict';this.$CustomAbrManager3.release();this.$CustomAbrManager3.engage();this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager5=false;};i.prototype.setResolutionConstraint=function(j,k){'use strict';this.$CustomAbrManager7=j;this.$CustomAbrManager8=k;this.$CustomAbrManager14();};i.prototype.initialize=function(j,k){'use strict';if(this.$CustomAbrManager1||this.$CustomAbrManager2)return;this.$CustomAbrManager1=j;this.$CustomAbrManager2=k;};i.prototype.start=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2||this.$CustomAbrManager6)return;this.$CustomAbrManager4=Date.now()+i.FIRST_SWITCH_INTERVAL;this.$CustomAbrManager3.addSubscriptions(c('EventListener').listen(this.$CustomAbrManager1,'bandwidth',this.$CustomAbrManager15.bind(this)),c('EventListener').listen(this.$CustomAbrManager2,'adaptation',this.$CustomAbrManager16.bind(this)),c('EventListener').listen(this.$CustomAbrManager2,'trackschanged',this.$CustomAbrManager17.bind(this)));this.$CustomAbrManager6=true;};i.prototype.$CustomAbrManager17=function(){'use strict';this.$CustomAbrManager14();};i.prototype.setPreferredVideoTrack=function(j){'use strict';var k=i.$CustomAbrManager18(this.$CustomAbrManager2.getVideoTracks()),l=k?h.compare(k,j)<0:false;this.$CustomAbrManager11=j;this.$CustomAbrManager14(null,l);};i.prototype.unsetPreferredVideoTrack=function(){'use strict';this.$CustomAbrManager11=null;this.$CustomAbrManager14(null,false);};i.prototype.enable=function(j){'use strict';this.$CustomAbrManager5=j;};i.prototype.getInitialVideoTrackId=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var j=this.$CustomAbrManager19();return j?j.id:null;};i.prototype.getInitialSwitchReason=function(){'use strict';return this.$CustomAbrManager13;};i.prototype.getInitialAudioTrackId=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var j=this.$CustomAbrManager20();return j?j.id:null;};i.prototype.selectVideoTrack=function(j,k,l,m){'use strict';if(!this.$CustomAbrManager6)return;this.$CustomAbrManager2.selectVideoTrack(j.id,k,l,m);};i.$CustomAbrManager18=function(j){'use strict';for(var k=0;k<j.length;++k)if(j[k].active)return j[k];return null;};i.prototype.$CustomAbrManager15=function(event){'use strict';if(Date.now()<this.$CustomAbrManager4)return;this.$CustomAbrManager14(event);};i.prototype.$CustomAbrManager14=function(event,j){'use strict';if(!this.$CustomAbrManager5)return;var k=this.$CustomAbrManager19();if(k){if(k.active){this.$CustomAbrManager4=Date.now()+i.MIN_EVAL_INTERVAL;return;}this.selectVideoTrack(k,!!j,0,this.$CustomAbrManager12);}this.$CustomAbrManager4=Number.POSITIVE_INFINITY;};i.prototype.$CustomAbrManager16=function(event){'use strict';if(this.$CustomAbrManager4==Number.POSITIVE_INFINITY)this.$CustomAbrManager4=Date.now()+i.MIN_SWITCH_INTERVAL;};i.prototype.$CustomAbrManager19=function(){var j,k=this;'use strict';var l=this.$CustomAbrManager2.getVideoTracks();if(l.length==0)return null;if(!this.$CustomAbrManager6)for(var m=0;m<l.length;m++)if(this.$CustomAbrManager10&&this.$CustomAbrManager10.includes(l[m].streamInfoID)){this.$CustomAbrManager12=c('VideoPlayerStreamSwitchReasons').FORCED;this.$CustomAbrManager13=c('VideoPlayerStreamSwitchReasons').FORCED;return l[m];}if(this.$CustomAbrManager11){var n=l.find(function(y){return y.id===this.$CustomAbrManager11.id;}.bind(this));if(n){this.$CustomAbrManager12=c('VideoPlayerStreamSwitchReasons').USER;return n;}}l.sort(h.compare);if(this.$CustomAbrManager9){var j=function(){var y=c('VideoQualityClasses').indexOf('hd'),z=l.filter(function(aa){return c('VideoQualityClasses').indexOf(aa.fbQualityClass)>=y;});k.$CustomAbrManager12=c('VideoPlayerStreamSwitchReasons').PREFER_HIGH_QUALITY;if(!z.length)return {v:l[l.length-1]};l=z;}();if(typeof j==="object")return j.v;}var o=l[0],p=this.$CustomAbrManager8,q=this.$CustomAbrManager7;l=l.filter(function(y){return y.width<=q||y.height<=p;});var r=i.$CustomAbrManager18(this.$CustomAbrManager2.getAudioTracks()),s=r?r.bandwidth:0,t=this.$CustomAbrManager1.getBandwidth();for(var m=0;m<l.length;m++){var u=l[m],v=m+1<l.length?l[m+1]:{bandwidth:Number.POSITIVE_INFINITY};if(!u.bandwidth)continue;var w=(u.bandwidth+s)/i.BANDWIDTH_DOWNGRADE_TARGET,x=(v.bandwidth+s)/i.BANDWIDTH_UPGRADE_TARGET;if(t>=w&&t<=x){o=u;if(o.active)break;}}this.$CustomAbrManager12=c('VideoPlayerStreamSwitchReasons').BANDWIDTH;return o;};i.prototype.$CustomAbrManager20=function(){'use strict';var j=this.$CustomAbrManager2.getAudioTracks();if(j.length==0)return null;if(!this.$CustomAbrManager6)for(var k=0;k<j.length;k++)if(this.$CustomAbrManager10&&this.$CustomAbrManager10.includes(j[k].streamInfoID))return j[k];return null;};i.FIRST_SWITCH_INTERVAL=c('VideoPlayerShakaExperiments').firstSwitchInterval;i.MIN_SWITCH_INTERVAL=c('VideoPlayerShakaExperiments').minSwitchInterval;i.MIN_EVAL_INTERVAL=c('VideoPlayerShakaExperiments').minEvalInterval;i.BANDWIDTH_UPGRADE_TARGET=c('VideoPlayerShakaExperiments').bandwidthUpgradeTarget||.85;i.BANDWIDTH_DOWNGRADE_TARGET=c('VideoPlayerShakaExperiments').bandwidthDowngradeTarget||.95;f.exports=i;},null);
__d('VideoPlayerLiveStreamState',['RTISubscriptionManager','EventEmitter'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('EventEmitter'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this);this.$VideoPlayerLiveStreamState1=c('RTISubscriptionManager').subscribe('video_broadcast/interrupt_'+k,this.$VideoPlayerLiveStreamState3.bind(this));this.$VideoPlayerLiveStreamState2=c('RTISubscriptionManager').subscribe('video_broadcast/ended_'+k,this.$VideoPlayerLiveStreamState4.bind(this));}j.prototype.unsubscribe=function(){'use strict';this.$VideoPlayerLiveStreamState2.unsubscribe();this.$VideoPlayerLiveStreamState1.unsubscribe();};j.prototype.$VideoPlayerLiveStreamState3=function(k){'use strict';var l=JSON.parse(k.payload||'{}')||{},m=l.time_position;if(m)m/=1000;this.emit('streamInterruptAt',m);};j.prototype.$VideoPlayerLiveStreamState4=function(k){'use strict';var l=JSON.parse(k.payload||'{}')||{},m=l.time_position;if(m)m/=1000;this.emit('streamEndedAt',m);};f.exports=j;},null);
__d('VideoPlayerHTML5Shaka',['invariant','Promise','BlobFactory','CacheStorage','CustomAbrManager','EventEmitter','EventListener','Event','Run','TaggedTimeRanges','VideoDashPrefetchCache','VideoPlayerLiveStreamState','VideoPlayerShakaExperiments','dispatchEvent','Shaka'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('Shaka').player,l=k.Player,m=k.DashVideoSource,n=k.VideoTrack,o=c('Shaka').dash.mpd.parseMpd,p=c('Shaka').util,q=p.EWMACacheBandwidthEstimator,r=p.EWMASignedURLBandwidthEstimator,s=p.FailoverUri,t=window.devicePixelRatio||1,u=new (c('CacheStorage'))('localstorage','_video_'),v=c('VideoPlayerShakaExperiments').enableAdaptation?new q(c('VideoPlayerShakaExperiments').cacheDelay,c('VideoPlayerShakaExperiments').cacheBandwidth,c('VideoPlayerShakaExperiments').useStoredBandwidthEstimate?u.get('bandwidthEstimate'):undefined):new r();s.setPrefetchCacheValueGetter(c('VideoDashPrefetchCache').getCacheValue);c('Run').onUnload(function(){return u.set('bandwidthEstimate',v.getBandwidth());});c('Shaka').polyfill.Fullscreen.install();function w(ca){var da=ca.getVideoTracks();da.sort(n.compare);var ea=da.reduce(function(fa,ga){return ga.fbQualityLabel=='hd'?ga:fa;});if(!ea)return da.pop().id;return ea.id;}function x(ca){var da=ca.getVideoTracks();da.sort(n.compare);return da.shift().id;}function y(ca){var da=c('BlobFactory').getBlob([ca]);return URL.createObjectURL(da);}function z(ca,event){var da=c('EventListener').capture(ca.parentNode,event,function(ea){if(ea.target!=ca)return;da.remove();c('Event').kill(ea);});}function aa(ca,da){'use strict';this.$DisabledAbrManager1=ca;this.$DisabledAbrManager2=da;}aa.prototype.initialize=function(ca,da){'use strict';this.$DisabledAbrManager3=da;};aa.prototype.start=function(){'use strict';if(this.$DisabledAbrManager4)return;this.$DisabledAbrManager4=true;if(this.$DisabledAbrManager2&&this.$DisabledAbrManager1)this.$DisabledAbrManager3.selectVideoTrack(w(this.$DisabledAbrManager3),false);};aa.prototype.enable=function(){'use strict';};aa.prototype.getInitialVideoTrackId=function(){'use strict';if(this.$DisabledAbrManager2)return x(this.$DisabledAbrManager3);var ca=this.$DisabledAbrManager1?w(this.$DisabledAbrManager3):x(this.$DisabledAbrManager3);return ca;};aa.prototype.setPreferredVideoTrack=function(ca){'use strict';if(this.$DisabledAbrManager4)this.$DisabledAbrManager3.selectVideoTrack(ca.id,true);};aa.prototype.unsetPreferredVideoTrack=function(){'use strict';};aa.prototype.destroy=function(){'use strict';this.$DisabledAbrManager3=null;};i=babelHelpers.inherits(ba,c('EventEmitter'));j=i&&i.prototype;function ba(ca,da,ea){var fa,ga=this,ha=ea.videoID,ia=ea.width,ja=ea.height,ka=ea.manifest,la=ea.manifestUrl,ma=ea.isLive,na=ea.playHighQualityTrack;'use strict';j.constructor.call(this);this.$VideoPlayerHTML5Shaka1=na;this.$VideoPlayerHTML5Shaka2=false;this.$VideoPlayerHTML5Shaka3=false;this.$VideoPlayerHTML5Shaka4=null;this.$VideoPlayerHTML5Shaka5=1;this.$VideoPlayerHTML5Shaka6=false;this.$VideoPlayerHTML5Shaka7=ia;this.$VideoPlayerHTML5Shaka8=ja;if(!c('VideoPlayerShakaExperiments').improveRebufferLogging)(function(){ga.$VideoPlayerHTML5Shaka9=true;var oa=c('EventListener').listen(ca,'playing',function(){this.$VideoPlayerHTML5Shaka9=false;oa.remove();}.bind(ga));})();c('EventListener').listen(ca,'timeupdate',function(oa){this.$VideoPlayerHTML5Shaka10(oa.target.currentTime);}.bind(this));this.$VideoPlayerHTML5Shaka11=null;this.$VideoPlayerHTML5Shaka12=null;this.$VideoPlayerHTML5Shaka13=null;this.$VideoPlayerHTML5Shaka14=new l(ca);this.$VideoPlayerHTML5Shaka14.addEventListener('bufferingStart',function(){return this.$VideoPlayerHTML5Shaka15();}.bind(this));this.$VideoPlayerHTML5Shaka14.addEventListener('bufferingEnd',function(){return this.$VideoPlayerHTML5Shaka16();}.bind(this));this.$VideoPlayerHTML5Shaka14.addEventListener('error',function(oa){return this.$VideoPlayerHTML5Shaka17(oa);}.bind(this));this.$VideoPlayerHTML5Shaka14.addEventListener('adaptation',this.$VideoPlayerHTML5Shaka18.bind(this));this.$VideoPlayerHTML5Shaka14.addEventListener('trackschanged',this.$VideoPlayerHTML5Shaka19.bind(this));this.$VideoPlayerHTML5Shaka14.addEventListener('manifestwrapped',this.$VideoPlayerHTML5Shaka20.bind(this));if(c('VideoPlayerShakaExperiments').enableLiveInterruptionDetection)this.$VideoPlayerHTML5Shaka14.addEventListener('manifestIsUpdating',this.$VideoPlayerHTML5Shaka21.bind(this));this.$VideoPlayerHTML5Shaka22=da;this.$VideoPlayerHTML5Shaka23=null;if(ka){this.$VideoPlayerHTML5Shaka24=o(ka);}else this.$VideoPlayerHTML5Shaka24=la;this.$VideoPlayerHTML5Shaka25=this.$VideoPlayerHTML5Shaka26();this.$VideoPlayerHTML5Shaka27=this.$VideoPlayerHTML5Shaka28();this.$VideoPlayerHTML5Shaka29=new (c('TaggedTimeRanges'))(function(oa,pa){return (oa.id===pa.id&&oa.reason===pa.reason);});this.$VideoPlayerHTML5Shaka27.setTaggedTimeRangesEntryAdder(function(oa,pa,qa){this.$VideoPlayerHTML5Shaka29.add(oa,pa,qa);}.bind(this));this.$VideoPlayerHTML5Shaka30=ca;this.$VideoPlayerHTML5Shaka14.configure({enableAdaptation:c('VideoPlayerShakaExperiments').enableAdaptation,appendPlayingQueryParam:c('VideoPlayerShakaExperiments').addCdnDebugQueryParameters,endBufferingOnPlaying:c('VideoPlayerShakaExperiments').endBufferingOnPlaying,usePlaybackRateForBuffering:c('VideoPlayerShakaExperiments').improveRebufferLogging,streamBufferSize:ma?c('VideoPlayerShakaExperiments').liveStreamBufferSize:c('VideoPlayerShakaExperiments').streamBufferSize,initialStreamBufferSize:ma?c('VideoPlayerShakaExperiments').liveInitialStreamBufferSize:c('VideoPlayerShakaExperiments').initialStreamBufferSize,includeStreamBufferSizeInStartOffset:c('VideoPlayerShakaExperiments').includeStreamBufferSizeInStartOffset,minMpdRefreshInterval:c('VideoPlayerShakaExperiments').minMpdRefreshInterval,disableCacheBustingEvenThoughItMayAffectBandwidthEstimation:true,liveStreamEndTimeout:c('VideoPlayerShakaExperiments').liveStreamEndTimeout/1000,enableLiveInterruptionDetection:c('VideoPlayerShakaExperiments').enableLiveInterruptionDetection,liveInterruptionConsecutiveUpdatesWithoutChange:c('VideoPlayerShakaExperiments').liveInterruptionConsecutiveUpdatesWithoutChange,liveInterruptionConsecutiveUpdatesWithChange:c('VideoPlayerShakaExperiments').liveInterruptionConsecutiveUpdatesWithChange,liveSendPushHeaders:c('VideoPlayerShakaExperiments').liveSendPushHeaders,resolveVideoTimeUpdateOnFragmentedTimeRanges:c('VideoPlayerShakaExperiments').resolveVideoTimeUpdateOnFragmentedTimeRanges});if(ma&&c('VideoPlayerShakaExperiments').enableLiveInterruptionDetection){this.$VideoPlayerHTML5Shaka31=new (c('VideoPlayerLiveStreamState'))(ha);this.$VideoPlayerHTML5Shaka31.addListener('streamInterruptAt',this.$VideoPlayerHTML5Shaka32.bind(this));}this.$VideoPlayerHTML5Shaka14.load(this.$VideoPlayerHTML5Shaka27);}ba.prototype.getEstimatedBandwidth=function(){'use strict';return v.getBandwidth();};ba.prototype.$VideoPlayerHTML5Shaka10=function(ca){'use strict';var da=this.$VideoPlayerHTML5Shaka29.get(ca);if(!da)return;var ea=da.id,fa=da.reason;if(this.$VideoPlayerHTML5Shaka23!==ea){var ga=this.$VideoPlayerHTML5Shaka23;this.$VideoPlayerHTML5Shaka23=ea;this.emit('representation_ended',{representationID:ga,nextRepresentationID:ea,streamSwitchReason:fa});}};ba.prototype.getStreamInfoIDForTimePosition=function(ca){'use strict';var da=this.$VideoPlayerHTML5Shaka29.get(ca),ea=null;if(da)ea=da.id;return ea;};ba.prototype.$VideoPlayerHTML5Shaka33=function(ca,da){'use strict';if(ca.fbQualityLabel){return ca.fbQualityLabel;}else if(n.compare(ca,da[0])==0){return 'SD';}else if(n.compare(ca,da[da.length-1])==0){return 'HD';}else return null;};ba.prototype.getAvailableVideoQualities=function(){'use strict';if(this.$VideoPlayerHTML5Shaka2)return this.$VideoPlayerHTML5Shaka11;var ca=this.$VideoPlayerHTML5Shaka27.getVideoTracks();ca.sort(n.compare);return ca.every(function(da){return da.fbQualityLabel!==null;})?ca.map(function(da){return da.fbQualityLabel;}):ca.length>1?['SD','HD']:['SD'];};ba.prototype.getSelectedVideoQuality=function(){'use strict';if(this.$VideoPlayerHTML5Shaka2)return this.$VideoPlayerHTML5Shaka12;var ca=this.$VideoPlayerHTML5Shaka27.getVideoTracks();ca.sort(n.compare);var da=ca.find(function(ea){return ea.active;});return da?this.$VideoPlayerHTML5Shaka33(da,ca):null;};ba.prototype.canAutoSelectVideoQuality=function(){'use strict';return c('VideoPlayerShakaExperiments').enableAdaptation;};ba.prototype.setPreferredVideoQuality=function(ca){'use strict';var da=this.$VideoPlayerHTML5Shaka27.getVideoTracks();da.sort(n.compare);var ea=da.find(function(fa){return ca==this.$VideoPlayerHTML5Shaka33(fa,da);}.bind(this));if(ea){this.$VideoPlayerHTML5Shaka13=ca;this.$VideoPlayerHTML5Shaka25.setPreferredVideoTrack(ea);}};ba.prototype.unsetPreferredVideoQuality=function(){'use strict';this.$VideoPlayerHTML5Shaka13=null;this.$VideoPlayerHTML5Shaka25.unsetPreferredVideoTrack();};ba.prototype.pause=function(){'use strict';if(this.$VideoPlayerHTML5Shaka34&&!c('VideoPlayerShakaExperiments').improveRebufferLogging){this.$VideoPlayerHTML5Shaka35=true;this.$VideoPlayerHTML5Shaka36=true;c('dispatchEvent')(this.$VideoPlayerHTML5Shaka30,'pause');this.$VideoPlayerHTML5Shaka14.setResumeAfterBuffering(false);}else this.$VideoPlayerHTML5Shaka30.pause();};ba.prototype.play=function(){'use strict';if(this.$VideoPlayerHTML5Shaka34&&!c('VideoPlayerShakaExperiments').improveRebufferLogging){this.$VideoPlayerHTML5Shaka35=false;this.$VideoPlayerHTML5Shaka36=true;c('dispatchEvent')(this.$VideoPlayerHTML5Shaka30,'play');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka30,'waiting');this.$VideoPlayerHTML5Shaka14.setResumeAfterBuffering(true);return c('Promise').resolve();}else return this.$VideoPlayerHTML5Shaka30.play();};ba.prototype.$VideoPlayerHTML5Shaka37=function(){'use strict';var ca=this.$VideoPlayerHTML5Shaka4;if(ca){var da=this.$VideoPlayerHTML5Shaka30.currentTime,ea=4,fa=da>ca-ea,ga=da>ca;if(ga){this.$VideoPlayerHTML5Shaka4=null;}else if(this.$VideoPlayerHTML5Shaka34)this.$VideoPlayerHTML5Shaka6=fa;}return this.$VideoPlayerHTML5Shaka6;};ba.prototype.$VideoPlayerHTML5Shaka15=function(){'use strict';if(!c('VideoPlayerShakaExperiments').improveRebufferLogging){z(this.$VideoPlayerHTML5Shaka30,'pause');this.$VideoPlayerHTML5Shaka35=false;this.$VideoPlayerHTML5Shaka36=false;}this.$VideoPlayerHTML5Shaka34=true;if(this.$VideoPlayerHTML5Shaka37()){this.emit('streamInterrupted');}else{this.$VideoPlayerHTML5Shaka14.setResumeAfterBuffering(true);this.emit('bufferingStart');}};ba.prototype.$VideoPlayerHTML5Shaka16=function(){var ca,da=this;'use strict';if(!c('VideoPlayerShakaExperiments').improveRebufferLogging){if(!this.$VideoPlayerHTML5Shaka35)z(this.$VideoPlayerHTML5Shaka30,'play');if(!this.$VideoPlayerHTML5Shaka36)(function(){var ea=c('EventListener').capture(da.$VideoPlayerHTML5Shaka30.parentNode,'playing',function(fa){if(fa.target!=this.$VideoPlayerHTML5Shaka30)return;ea.remove();if(this.$VideoPlayerHTML5Shaka9){this.$VideoPlayerHTML5Shaka9=false;return;}c('Event').kill(fa);}.bind(da));})();}this.$VideoPlayerHTML5Shaka34=false;this.$VideoPlayerHTML5Shaka27.setIsLiveInterrupted(false);if(this.$VideoPlayerHTML5Shaka6){this.$VideoPlayerHTML5Shaka38();}else this.emit('bufferingEnd');};ba.prototype.$VideoPlayerHTML5Shaka17=function(ca){'use strict';var da=ca.detail||{},ea=da.type||'undefined';if(this.$VideoPlayerHTML5Shaka3&&this.$VideoPlayerHTML5Shaka2&&ea=='net')return;this.emit('error',{error:'SHAKA_'+ea.toUpperCase(),message:da.message,httpStatus:da.status||null,url:da.url||null});};ba.prototype.hasSelectableVideoTracks=function(){'use strict';var ca=this.$VideoPlayerHTML5Shaka14.getVideoTracks();return ca.length>1;};ba.prototype.unload=function(){'use strict';this.$VideoPlayerHTML5Shaka12=this.getSelectedVideoQuality();this.$VideoPlayerHTML5Shaka11=this.getAvailableVideoQualities();this.$VideoPlayerHTML5Shaka3=this.$VideoPlayerHTML5Shaka27&&this.$VideoPlayerHTML5Shaka27.isLive();this.$VideoPlayerHTML5Shaka14.unload();this.$VideoPlayerHTML5Shaka2=true;};ba.prototype.$VideoPlayerHTML5Shaka26=function(){'use strict';var ca=this.$VideoPlayerHTML5Shaka1,da={forceHighQualityDefault:ca,maxWidth:this.$VideoPlayerHTML5Shaka39(),maxHeight:this.$VideoPlayerHTML5Shaka40(),initiallyForcedRepresentations:this.$VideoPlayerHTML5Shaka22};return c('VideoPlayerShakaExperiments').enableAdaptation?new (c('CustomAbrManager'))(da):new aa(ca,c('VideoPlayerShakaExperiments').switchFromLowQuality);};ba.prototype.$VideoPlayerHTML5Shaka28=function(){'use strict';!this.$VideoPlayerHTML5Shaka25?h(0):void 0;!this.$VideoPlayerHTML5Shaka24?h(0):void 0;var ca=new m(this.$VideoPlayerHTML5Shaka24,null,v,this.$VideoPlayerHTML5Shaka25);return ca;};ba.prototype.reload=function(ca){'use strict';if(!this.$VideoPlayerHTML5Shaka2)return;this.$VideoPlayerHTML5Shaka25=this.$VideoPlayerHTML5Shaka26();this.$VideoPlayerHTML5Shaka27=this.$VideoPlayerHTML5Shaka28();if(this.$VideoPlayerHTML5Shaka37()){this.$VideoPlayerHTML5Shaka30.playbackRate=0;this.emit('streamInterrupted');}this.$VideoPlayerHTML5Shaka14.setPlaybackStartTime(ca);return this.$VideoPlayerHTML5Shaka14.loadWithSilencedErrors(this.$VideoPlayerHTML5Shaka27).then(function(){if(this.$VideoPlayerHTML5Shaka3!=this.$VideoPlayerHTML5Shaka27.isLive())return this.$VideoPlayerHTML5Shaka41();if(this.$VideoPlayerHTML5Shaka13)this.setPreferredVideoQuality(this.$VideoPlayerHTML5Shaka13);this.$VideoPlayerHTML5Shaka12=null;this.$VideoPlayerHTML5Shaka42=null;this.$VideoPlayerHTML5Shaka2=false;}.bind(this))['catch'](function(da){if(this.$VideoPlayerHTML5Shaka3)return this.$VideoPlayerHTML5Shaka41();da.detail=da.detail||{};da.detail.type=da.detail.type||'LOAD_FAILURE';this.$VideoPlayerHTML5Shaka17(da);}.bind(this));};ba.prototype.$VideoPlayerHTML5Shaka41=function(){'use strict';c('dispatchEvent')(this.$VideoPlayerHTML5Shaka30,'seeked');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka30,'playing');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka30,'ended');this.emit('streamResumed');this.$VideoPlayerHTML5Shaka31.unsubscribe();this.unload();};ba.prototype.getLongestInitResponseTime=function(){'use strict';return this.$VideoPlayerHTML5Shaka27.getLongestInitResponseTime();};ba.$VideoPlayerHTML5Shaka43=function(){'use strict';return (c('VideoPlayerShakaExperiments').resolutionConstraintFactor*t);};ba.prototype.$VideoPlayerHTML5Shaka39=function(){'use strict';if(!c('VideoPlayerShakaExperiments').useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka7*ba.$VideoPlayerHTML5Shaka43();};ba.prototype.$VideoPlayerHTML5Shaka40=function(){'use strict';if(!c('VideoPlayerShakaExperiments').useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka8*ba.$VideoPlayerHTML5Shaka43();};ba.prototype.setDimensions=function(ca,da){'use strict';this.$VideoPlayerHTML5Shaka7=ca;this.$VideoPlayerHTML5Shaka8=da;this.$VideoPlayerHTML5Shaka25.setResolutionConstraint(this.$VideoPlayerHTML5Shaka39(),this.$VideoPlayerHTML5Shaka40());};ba.isSupported=function(){'use strict';return l.isBrowserSupported();};ba.prototype.$VideoPlayerHTML5Shaka19=function(){'use strict';this.emit('tracksChanged');};ba.prototype.$VideoPlayerHTML5Shaka18=function(event){'use strict';if(event.contentType==='video')this.emit('adaptation',{reason:event.reason});};ba.prototype.$VideoPlayerHTML5Shaka32=function(ca){'use strict';this.$VideoPlayerHTML5Shaka27.setIsLiveInterrupted(true);this.$VideoPlayerHTML5Shaka4=ca;};ba.prototype.$VideoPlayerHTML5Shaka21=function(){'use strict';if(this.$VideoPlayerHTML5Shaka37())this.$VideoPlayerHTML5Shaka38();};ba.prototype.$VideoPlayerHTML5Shaka38=function(){'use strict';this.$VideoPlayerHTML5Shaka4=null;this.$VideoPlayerHTML5Shaka6=false;this.emit('streamResumed');};ba.prototype.$VideoPlayerHTML5Shaka20=function(){'use strict';var ca=!this.$VideoPlayerHTML5Shaka30.paused;this.unload();this.reload().then(function(){if(this.$VideoPlayerHTML5Shaka6)this.$VideoPlayerHTML5Shaka38();if(ca)this.play();}.bind(this))['catch'](function(da){});};f.exports=ba;},null);